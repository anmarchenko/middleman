Running RuboCop...
Inspecting 6 files
C..CCC

Offenses:

Gemfile:4:5: C: [Correctable] Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols.
gem "ddtrace"
    ^^^^^^^^^
Gemfile:5:1: C: [Correctable] Bundler/OrderedGems: Gems should be sorted in an alphabetical order within their section of the Gemfile. Gem datadog-ci should appear before ddtrace.
gem "datadog-ci", path: "../datadog-ci-rb"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Gemfile:5:5: C: [Correctable] Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols.
gem "datadog-ci", path: "../datadog-ci-rb"
    ^^^^^^^^^^^^
Gemfile:5:25: C: [Correctable] Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols.
gem "datadog-ci", path: "../datadog-ci-rb"
                        ^^^^^^^^^^^^^^^^^^
Gemfile:7:3: C: [Correctable] Layout/CommentIndentation: Incorrect indentation detected (column 2 instead of 0).
  # Build and doc tools
  ^^^^^^^^^^^^^^^^^^^^^
Gemfile:50:5: C: [Correctable] Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols.
gem "standard"
    ^^^^^^^^^^
middleman-cli/Rakefile:3:26: C: [Correctable] Style/StringConcatenation: Prefer string interpolation to string concatenation.
require File.expand_path(File.dirname(__FILE__) + '/../gem_rake_helper')
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
middleman-core/Rakefile:3:26: C: [Correctable] Style/StringConcatenation: Prefer string interpolation to string concatenation.
require File.expand_path(File.dirname(__FILE__) + '/../gem_rake_helper')
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
middleman/Rakefile:3:26: C: [Correctable] Style/StringConcatenation: Prefer string interpolation to string concatenation.
require File.expand_path(File.dirname(__FILE__) + '/../gem_rake_helper')
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

6 files inspected, 9 offenses detected, 9 offenses auto-correctable

Tip: Based on detected gems, the following RuboCop extension libraries might be helpful:
  * rubocop-rake (https://github.com/rubocop/rubocop-rake)
  * rubocop-rspec (https://github.com/rubocop/rubocop-rspec)

You can opt out of this message by adding the following to your config (see https://docs.rubocop.org/rubocop/extensions.html#extension-suggestions for more options):
  AllCops:
    SuggestExtensions: false
/Users/andrey.marchenko/.rbenv/versions/3.2.2/bin/ruby -I/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rspec-core-3.10.1/lib:/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rspec-support-3.10.2/lib /Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rspec-core-3.10.1/exe/rspec --pattern spec/\*\*/\*_spec.rb --color --format documentation
D, [2023-10-20T16:32:23.205511 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/configuration/components.rb:75:in `build_agentless_transport') CI visibility configured to use agentless transport
D, [2023-10-20T16:32:23.207122 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/core/configuration/components.rb:116:in `startup!') Profiling is disabled
D, [2023-10-20T16:32:23.207183 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/configuration/components.rb:75:in `build_agentless_transport') CI visibility configured to use agentless transport
D, [2023-10-20T16:32:23.207328 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/core/configuration/components.rb:116:in `startup!') Profiling is disabled
Run options: include {:focus=>true}

All examples were filtered out; ignoring {:focus=>true}

Randomized with seed 21681

Middleman::CoreExtensions::Data::DataStore
  #key?
    doesn't raise a stack error if missing the given key
D, [2023-10-20T16:32:23.531385 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1303572102599695619
Parent ID: 0
Trace ID: 716695995456466822
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#key? doesn't raise a stack error if missing the given key
Error: 0
Start: 1697812343485184000
End: 1697812343529758976
Duration: 0.04457699996419251
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#key? doesn't raise a stack error if missing the given key,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

D, [2023-10-20T16:32:23.531500 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/workers.rb:69:in `block in start') Starting thread for: #<Datadog::Tracing::Workers::AsyncTransport:0x00000001051d73a0>
D, [2023-10-20T16:32:23.532438 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/test_visibility/transport.rb:42:in `send_traces') Sending 1 traces...
    returns false if key not in local_data, local_sources, or callback_sources
D, [2023-10-20T16:32:23.532897 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/test_visibility/transport.rb:53:in `block in send_traces') Send chunk of 1 events; payload size 1391
D, [2023-10-20T16:32:23.533365 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1824488795030846829
Parent ID: 0
Trace ID: 3922982717828732210
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#key? returns false if key not in local_data, local_sources, or callback_sources
Error: 0
Start: 1697812343531655936
End: 1697812343532788992
Duration: 0.0011340000201016665
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#key? returns false if key not in local_data, local_sources, or callback_sources,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    returns true if key included in local_data, local_sources, or callback_sources
D, [2023-10-20T16:32:23.535115 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3032865959766849407
Parent ID: 0
Trace ID: 892727496309626157
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#key? returns true if key included in local_data, local_sources, or callback_sources
Error: 0
Start: 1697812343533483008
End: 1697812343533643008
Duration: 0.00016000005416572094
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#key? returns true if key included in local_data, local_sources, or callback_sources,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

D, [2023-10-20T16:32:23.535203 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/transport/http.rb:39:in `request') Sending post request: host=citestcycle-intake.datadoghq.eu; port=443; ssl_enabled=true; compression_enabled=true; path=/api/v2/citestcycle; payload_size=724
  #data_for_path
    given path matches both sources
      returns match from local data
D, [2023-10-20T16:32:23.538234 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2679604423657308727
Parent ID: 0
Trace ID: 2328268585900791651
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches both sources returns match from local data
Error: 0
Start: 1697812343536766976
End: 1697812343537531904
Duration: 0.0007660000119358301
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches both sources returns match from local data,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    given path matches callback data
      returns value of calback lambda
D, [2023-10-20T16:32:23.539900 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 91072532706259304
Parent ID: 0
Trace ID: 4551297174455534646
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches callback data returns value of calback lambda
Error: 0
Start: 1697812343538334976
End: 1697812343539485952
Duration: 0.00115099991671741
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches callback data returns value of calback lambda,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    given path matches local data
      returns array for key
D, [2023-10-20T16:32:23.540544 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4258061463396954967
Parent ID: 0
Trace ID: 3424750771869158833
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches local data returns array for key
Error: 0
Start: 1697812343539993088
End: 1697812343540103936
Duration: 0.00010999990627169609
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches local data returns array for key,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      returns hash for key
D, [2023-10-20T16:32:23.541199 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1628478754995095705
Parent ID: 0
Trace ID: 3620095310142122894
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches local data returns hash for key
Error: 0
Start: 1697812343540588032
End: 1697812343540695040
Duration: 0.00010700011625885963
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches local data returns hash for key,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    given path matches no sources
      returns nil
D, [2023-10-20T16:32:23.541783 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4217822490748920930
Parent ID: 0
Trace ID: 2088230015488530301
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches no sources returns nil
Error: 0
Start: 1697812343541285120
End: 1697812343541389056
Duration: 0.00010399986058473587
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#data_for_path given path matches no sources returns nil,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  #callbacks
    when given a name and proc
      overwrites previous keys if given the same key
D, [2023-10-20T16:32:23.542394 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4246598487052811418
Parent ID: 0
Trace ID: 3627210049012608954
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#callbacks when given a name and proc overwrites previous keys if given the same key
Error: 0
Start: 1697812343541906944
End: 1697812343542000896
Duration: 9.400001727044582e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#callbacks when given a name and proc overwrites previous keys if given the same key,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      adds a callback at the given name
D, [2023-10-20T16:32:23.542904 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1909077713269107804
Parent ID: 0
Trace ID: 3822470993563147091
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#callbacks when given a name and proc adds a callback at the given name
Error: 0
Start: 1697812343542435072
End: 1697812343542513920
Duration: 7.899990305304527e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#callbacks when given a name and proc adds a callback at the given name,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when given no args
      returns @callback_sources instance var
D, [2023-10-20T16:32:23.543602 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2232367954816703720
Parent ID: 0
Trace ID: 3867964768304917352
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#callbacks when given no args returns @callback_sources instance var
Error: 0
Start: 1697812343542972928
End: 1697812343543205120
Duration: 0.00023200013674795628
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#callbacks when given no args returns @callback_sources instance var,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  #store
    when given no args
      returns @local_sources instance var
D, [2023-10-20T16:32:23.544197 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2541412671696156463
Parent ID: 0
Trace ID: 3128093522865535439
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#store when given no args returns @local_sources instance var
Error: 0
Start: 1697812343543719936
End: 1697812343543810048
Duration: 8.999998681247234e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#store when given no args returns @local_sources instance var,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when given a name and data
      adds data at the given name
D, [2023-10-20T16:32:23.544775 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 86653807604333693
Parent ID: 0
Trace ID: 4156477704055286900
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#store when given a name and data adds data at the given name
Error: 0
Start: 1697812343544271104
End: 1697812343544370944
Duration: 0.00010000006295740604
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#store when given a name and data adds data at the given name,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      overwrites previous keys if given the same key
D, [2023-10-20T16:32:23.545319 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1004148495678347351
Parent ID: 0
Trace ID: 4178320658607064920
Type: test
Service: middleman
Resource: Middleman::CoreExtensions::Data::DataStore#store when given a name and data overwrites previous keys if given the same key
Error: 0
Start: 1697812343544818944
End: 1697812343544918016
Duration: 9.900005534291267e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CoreExtensions::Data::DataStore#store when given a name and data overwrites previous keys if given the same key,
   test.suite => ./spec/middleman-core/core_extensions/data_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]


Middleman::DnsResolver
  #names_for
    when network resolver can resolve name
      is expected to eq ["localhost"]
D, [2023-10-20T16:32:23.550685 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 824237741674718117
Parent ID: 0
Trace ID: 3870908290226671819
Type: test
Service: middleman
Resource: Middleman::DnsResolver#names_for when network resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:58
Error: 0
Start: 1697812343545508096
End: 1697812343550267904
Duration: 0.004760999931022525
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::DnsResolver#names_for when network resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:58,
   test.suite => ./spec/middleman-core/dns_resolver_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when hosts resolver can resolve name
      is expected to eq ["localhost"]
D, [2023-10-20T16:32:23.551463 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3772422298335334690
Parent ID: 0
Trace ID: 3309170660978400159
Type: test
Service: middleman
Resource: Middleman::DnsResolver#names_for when hosts resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:32
Error: 0
Start: 1697812343550770944
End: 1697812343551059968
Duration: 0.00028900010511279106
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::DnsResolver#names_for when hosts resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:32,
   test.suite => ./spec/middleman-core/dns_resolver_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when local link resolver can resolve name
      is expected to eq ["localhost"]
D, [2023-10-20T16:32:23.552216 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4287530652364698912
Parent ID: 0
Trace ID: 694749962620868418
Type: test
Service: middleman
Resource: Middleman::DnsResolver#names_for when local link resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:45
Error: 0
Start: 1697812343551548928
End: 1697812343551825920
Duration: 0.0002770000137388706
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::DnsResolver#names_for when local link resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:45,
   test.suite => ./spec/middleman-core/dns_resolver_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  #ips_for
    when network resolver can resolve name
      is expected to eq ["localhost"]
D, [2023-10-20T16:32:23.552996 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 885011610662829473
Parent ID: 0
Trace ID: 4038919870560720289
Type: test
Service: middleman
Resource: Middleman::DnsResolver#ips_for when network resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:99
Error: 0
Start: 1697812343552334080
End: 1697812343552598016
Duration: 0.00026400014758110046
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::DnsResolver#ips_for when network resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:99,
   test.suite => ./spec/middleman-core/dns_resolver_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when local link resolver can resolve name
      is expected to eq ["localhost"]
D, [2023-10-20T16:32:23.553717 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1938941961593570072
Parent ID: 0
Trace ID: 189491198722230628
Type: test
Service: middleman
Resource: Middleman::DnsResolver#ips_for when local link resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:86
Error: 0
Start: 1697812343553073920
End: 1697812343553325056
Duration: 0.00025100004859268665
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::DnsResolver#ips_for when local link resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:86,
   test.suite => ./spec/middleman-core/dns_resolver_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when hosts resolver can resolve name
      is expected to eq ["localhost"]
D, [2023-10-20T16:32:23.554426 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1354394170448707366
Parent ID: 0
Trace ID: 3692162408322345719
Type: test
Service: middleman
Resource: Middleman::DnsResolver#ips_for when hosts resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:73
Error: 0
Start: 1697812343553785088
End: 1697812343554032896
Duration: 0.0002470000181347132
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::DnsResolver#ips_for when hosts resolver can resolve name example at ./spec/middleman-core/dns_resolver_spec.rb:73,
   test.suite => ./spec/middleman-core/dns_resolver_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]


Middleman::Util
  ::asset_url
D, [2023-10-20T16:32:23.744964 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/test_visibility/transport.rb:59:in `block in send_traces') Received server response: Datadog::Core::Transport::HTTP::Adapters::Net::Response ok?:true unsupported?:false, not_found?:false, client_error?:false, server_error?:false, internal_error?:, payload:{}, http_response:#<Net::HTTPAccepted:0x0000000103620e68>
    returns a resource url if given a resources path
D, [2023-10-20T16:32:23.914764 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3090125094297785660
Parent ID: 0
Trace ID: 4007817545249570042
Type: test
Service: middleman
Resource: Middleman::Util::asset_url returns a resource url if given a resources path
Error: 0
Start: 1697812343554619904
End: 1697812343913843968
Duration: 0.359235999872908
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url returns a resource url if given a resources path,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    returns a resource url if given a resource's destination path
D, [2023-10-20T16:32:23.941963 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4021856252018097558
Parent ID: 0
Trace ID: 2142404095280018160
Type: test
Service: middleman
Resource: Middleman::Util::asset_url returns a resource url if given a resource's destination path
Error: 0
Start: 1697812343915091968
End: 1697812343941317120
Duration: 0.026228999951854348
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url returns a resource url if given a resource's destination path,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    returns path if it is already a full path
D, [2023-10-20T16:32:23.942808 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3868728999423492524
Parent ID: 0
Trace ID: 1476137063149683326
Type: test
Service: middleman
Resource: Middleman::Util::asset_url returns path if it is already a full path
Error: 0
Start: 1697812343942085120
End: 1697812343942292992
Duration: 0.0002079999540001154
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url returns path if it is already a full path,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    returns path relative to the provided current_resource
D, [2023-10-20T16:32:23.966647 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3558508880791355969
Parent ID: 0
Trace ID: 774482502200182039
Type: test
Service: middleman
Resource: Middleman::Util::asset_url returns path relative to the provided current_resource
Error: 0
Start: 1697812343942865920
End: 1697812343965955072
Duration: 0.02309400006197393
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url returns path relative to the provided current_resource,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    returns a resource url when asset_hash is on
D, [2023-10-20T16:32:24.025842 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2110093988157859477
Parent ID: 0
Trace ID: 2738008052942634064
Type: test
Service: middleman
Resource: Middleman::Util::asset_url returns a resource url when asset_hash is on
Error: 0
Start: 1697812343966765056
End: 1697812344025122048
Duration: 0.058360999915748835
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url returns a resource url when asset_hash is on,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when http_prefix is activated
      returns path with http_prefix pre-pended if resource is not found
D, [2023-10-20T16:32:24.053026 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1631897773083344950
Parent ID: 0
Trace ID: 2912772905058046200
Type: test
Service: middleman
Resource: Middleman::Util::asset_url when http_prefix is activated returns path with http_prefix pre-pended if resource is not found
Error: 0
Start: 1697812344026149120
End: 1697812344052193024
Duration: 0.026049999985843897
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url when http_prefix is activated returns path with http_prefix pre-pended if resource is not found,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      returns path with http_prefix pre-pended if resource is found
D, [2023-10-20T16:32:24.077228 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3252513382995602204
Parent ID: 0
Trace ID: 3029045369929044270
Type: test
Service: middleman
Resource: Middleman::Util::asset_url when http_prefix is activated returns path with http_prefix pre-pended if resource is found
Error: 0
Start: 1697812344053246976
End: 1697812344076551936
Duration: 0.023311000084504485
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url when http_prefix is activated returns path with http_prefix pre-pended if resource is found,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when relative is true
      returns path relative to the provided current_resource
D, [2023-10-20T16:32:24.113489 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1670168242914560172
Parent ID: 0
Trace ID: 3515473056830353112
Type: test
Service: middleman
Resource: Middleman::Util::asset_url when relative is true returns path relative to the provided current_resource
Error: 0
Start: 1697812344077628928
End: 1697812344112817920
Duration: 0.03519299998879433
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url when relative is true returns path relative to the provided current_resource,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      raises error if not given a current_resource
D, [2023-10-20T16:32:24.176471 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1314413626389485832
Parent ID: 0
Trace ID: 1286695704923061868
Type: test
Service: middleman
Resource: Middleman::Util::asset_url when relative is true raises error if not given a current_resource
Error: 0
Start: 1697812344113623040
End: 1697812344175645952
Duration: 0.06202699989080429
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url when relative is true raises error if not given a current_resource,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      when the asset is stored in the same directory as current_resource
        returns path relative to the provided current_resource
D, [2023-10-20T16:32:24.369496 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4220643555617173777
Parent ID: 0
Trace ID: 2821810408725777520
Type: test
Service: middleman
Resource: Middleman::Util::asset_url when relative is true when the asset is stored in the same directory as current_resource returns path relative to the provided current_resource
Error: 0
Start: 1697812344176762880
End: 1697812344368611072
Duration: 0.19185899989679456
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::asset_url when relative is true when the asset is stored in the same directory as current_resource returns path relative to the provided current_resource,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  ::find_related_files
    Finds partials possibly related to ERb files
D, [2023-10-20T16:32:24.460246 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 317914850559824478
Parent ID: 0
Trace ID: 3768358742516503394
Type: test
Service: middleman
Resource: Middleman::Util::find_related_files Finds partials possibly related to ERb files
Error: 0
Start: 1697812344379747072
End: 1697812344459365888
Duration: 0.07962099998258054
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::find_related_files Finds partials possibly related to ERb files,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    Finds partials possible related to Scss files
D, [2023-10-20T16:32:24.555536 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2756309079457417069
Parent ID: 0
Trace ID: 366301213302714793
Type: test
Service: middleman
Resource: Middleman::Util::find_related_files Finds partials possible related to Scss files
Error: 0
Start: 1697812344460442880
End: 1697812344554603008
Duration: 0.09416299988515675
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::find_related_files Finds partials possible related to Scss files,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  ::path_match
    works with globs
D, [2023-10-20T16:32:24.557585 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2647694073712050552
Parent ID: 0
Trace ID: 2582794554723995986
Type: test
Service: middleman
Resource: Middleman::Util::path_match works with globs
Error: 0
Start: 1697812344555909120
End: 1697812344557115904
Duration: 0.0012070001102983952
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::path_match works with globs,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    won't match a wrong string
D, [2023-10-20T16:32:24.564389 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 244176872773071923
Parent ID: 0
Trace ID: 2797646971616433583
Type: test
Service: middleman
Resource: Middleman::Util::path_match won't match a wrong string
Error: 0
Start: 1697812344563417088
End: 1697812344563724032
Duration: 0.0003090000245720148
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::path_match won't match a wrong string,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    matches a literal string
D, [2023-10-20T16:32:24.568013 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3099273813970772604
Parent ID: 0
Trace ID: 821464660866265485
Type: test
Service: middleman
Resource: Middleman::Util::path_match matches a literal string
Error: 0
Start: 1697812344567147008
End: 1697812344567260928
Duration: 0.00011399993672966957
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::path_match matches a literal string,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    won't match a partial string
D, [2023-10-20T16:32:24.568601 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1467740023300887669
Parent ID: 0
Trace ID: 545341989723538532
Type: test
Service: middleman
Resource: Middleman::Util::path_match won't match a partial string
Error: 0
Start: 1697812344568084992
End: 1697812344568169984
Duration: 8.499994874000549e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::path_match won't match a partial string,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    works with a proc
D, [2023-10-20T16:32:24.569206 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 984938479071885820
Parent ID: 0
Trace ID: 2038510990879543250
Type: test
Service: middleman
Resource: Middleman::Util::path_match works with a proc
Error: 0
Start: 1697812344568644096
End: 1697812344568730112
Duration: 8.699996396899223e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::path_match works with a proc,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    works with a regex
D, [2023-10-20T16:32:24.569835 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2105050777205328648
Parent ID: 0
Trace ID: 1645292229805382940
Type: test
Service: middleman
Resource: Middleman::Util::path_match works with a regex
Error: 0
Start: 1697812344569261056
End: 1697812344569339904
Duration: 7.999991066753864e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::path_match works with a regex,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  ::step_through_extensions
    returns the base name after templating engine extensions are removed
D, [2023-10-20T16:32:24.570639 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3537550323547860126
Parent ID: 0
Trace ID: 4397261532391620495
Type: test
Service: middleman
Resource: Middleman::Util::step_through_extensions returns the base name after templating engine extensions are removed
Error: 0
Start: 1697812344569934080
End: 1697812344570071040
Duration: 0.00013699987903237343
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::step_through_extensions returns the base name after templating engine extensions are removed,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    does not loop infinitely when file name is a possible templating engine
D, [2023-10-20T16:32:24.571496 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 943870233351026999
Parent ID: 0
Trace ID: 2242403343817451742
Type: test
Service: middleman
Resource: Middleman::Util::step_through_extensions does not loop infinitely when file name is a possible templating engine
Error: 0
Start: 1697812344570747904
End: 1697812344571032064
Duration: 0.0002840000670403242
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::step_through_extensions does not loop infinitely when file name is a possible templating engine,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  ::recursively_enhance
    returns Array with strings, or IndifferentHash, true, false
D, [2023-10-20T16:32:24.572281 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3384969885686518837
Parent ID: 0
Trace ID: 1692020298760840296
Type: test
Service: middleman
Resource: Middleman::Util::recursively_enhance returns Array with strings, or IndifferentHash, true, false
Error: 0
Start: 1697812344571640064
End: 1697812344571830016
Duration: 0.0001900000497698784
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::recursively_enhance returns Array with strings, or IndifferentHash, true, false,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    returns Hashie extended Hash if given a hash
D, [2023-10-20T16:32:24.572863 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3664159625601977464
Parent ID: 0
Trace ID: 573642406121410352
Type: test
Service: middleman
Resource: Middleman::Util::recursively_enhance returns Hashie extended Hash if given a hash
Error: 0
Start: 1697812344572332032
End: 1697812344572441088
Duration: 0.00010900013148784637
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::recursively_enhance returns Hashie extended Hash if given a hash,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  ::binary?
    recognizes middleman as binary
D, [2023-10-20T16:32:24.576322 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2054502523612313839
Parent ID: 0
Trace ID: 1322163303618225864
Type: test
Service: middleman
Resource: Middleman::Util::binary? recognizes middleman as binary
Error: 0
Start: 1697812344572987904
End: 1697812344575427072
Duration: 0.002440999960526824
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::binary? recognizes middleman as binary,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    recognizes plain.txt as not binary
D, [2023-10-20T16:32:24.577186 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3048637348008388595
Parent ID: 0
Trace ID: 2593849961202864082
Type: test
Service: middleman
Resource: Middleman::Util::binary? recognizes plain.txt as not binary
Error: 0
Start: 1697812344576424960
End: 1697812344576569088
Duration: 0.00014500017277896404
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::binary? recognizes plain.txt as not binary,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    recognizes unicode as not binary
D, [2023-10-20T16:32:24.584900 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3910835976924259505
Parent ID: 0
Trace ID: 259757211443509387
Type: test
Service: middleman
Resource: Middleman::Util::binary? recognizes unicode as not binary
Error: 0
Start: 1697812344577246976
End: 1697812344584192000
Duration: 0.006946999812498689
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::binary? recognizes unicode as not binary,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    recognizes stars.svgz as binary
D, [2023-10-20T16:32:24.587062 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3192993546860947194
Parent ID: 0
Trace ID: 271576109994258698
Type: test
Service: middleman
Resource: Middleman::Util::binary? recognizes stars.svgz as binary
Error: 0
Start: 1697812344586457088
End: 1697812344586589952
Duration: 0.0001330000814050436
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::binary? recognizes stars.svgz as binary,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    recognizes unicode.txt as not binary
D, [2023-10-20T16:32:24.587685 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4138299630004454199
Parent ID: 0
Trace ID: 4266574043931479753
Type: test
Service: middleman
Resource: Middleman::Util::binary? recognizes unicode.txt as not binary
Error: 0
Start: 1697812344587126016
End: 1697812344587233024
Duration: 0.00010600010864436626
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::binary? recognizes unicode.txt as not binary,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    recognizes middleman.png as binary
D, [2023-10-20T16:32:24.588430 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3077135695859699505
Parent ID: 0
Trace ID: 2957729235768683815
Type: test
Service: middleman
Resource: Middleman::Util::binary? recognizes middleman.png as binary
Error: 0
Start: 1697812344587745024
End: 1697812344587848960
Duration: 0.00010400009341537952
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::Util::binary? recognizes middleman.png as binary,
   test.suite => ./spec/middleman-core/util_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]


Middleman::CallbackManager
  works in isolation
D, [2023-10-20T16:32:24.592029 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 419042303913399498
Parent ID: 0
Trace ID: 164838496153922036
Type: test
Service: middleman
Resource: Middleman::CallbackManager works in isolation
Error: 0
Start: 1697812344589622016
End: 1697812344589832960
Duration: 0.00020999996922910213
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager works in isolation,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  adds a simple key
D, [2023-10-20T16:32:24.592763 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3341482677225506214
Parent ID: 0
Trace ID: 2041796313420241800
Type: test
Service: middleman
Resource: Middleman::CallbackManager adds a simple key
Error: 0
Start: 1697812344592154880
End: 1697812344592303104
Duration: 0.00014699995517730713
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager adds a simple key,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  adds a nested key
D, [2023-10-20T16:32:24.593649 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3878645042144415198
Parent ID: 0
Trace ID: 827781879532964538
Type: test
Service: middleman
Resource: Middleman::CallbackManager adds a nested key
Error: 0
Start: 1697812344592998912
End: 1697812344593146112
Duration: 0.00014800019562244415
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager adds a nested key,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  executes in default scope
D, [2023-10-20T16:32:24.594449 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3353695219996705224
Parent ID: 0
Trace ID: 2755348466649295597
Type: test
Service: middleman
Resource: Middleman::CallbackManager executes in default scope
Error: 0
Start: 1697812344593789952
End: 1697812344593932032
Duration: 0.0001409999094903469
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager executes in default scope,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  installs to arbitrary instances
D, [2023-10-20T16:32:24.595287 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4143450555353967572
Parent ID: 0
Trace ID: 2937469685632821532
Type: test
Service: middleman
Resource: Middleman::CallbackManager installs to arbitrary instances
Error: 0
Start: 1697812344594664960
End: 1697812344594803968
Duration: 0.00013899989426136017
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager installs to arbitrary instances,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  callbacks run in order
D, [2023-10-20T16:32:24.596206 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3369943909882734438
Parent ID: 0
Trace ID: 1821822088269699364
Type: test
Service: middleman
Resource: Middleman::CallbackManager callbacks run in order
Error: 0
Start: 1697812344595439104
End: 1697812344595584000
Duration: 0.00014399993233382702
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager callbacks run in order,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  executes in custom scope
D, [2023-10-20T16:32:24.597388 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 217538557584630961
Parent ID: 0
Trace ID: 320523739821567502
Type: test
Service: middleman
Resource: Middleman::CallbackManager executes in custom scope
Error: 0
Start: 1697812344596366080
End: 1697812344596545024
Duration: 0.0001799999736249447
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::CallbackManager executes in custom scope,
   test.suite => ./spec/middleman-core/callbacks_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]


Middleman::PreviewServer::ServerIpAddress
  #to_s
    when ipv6
      with suffix
        is expected to eq "2607:f700:8000:12e:b3d9:1cba:b52:aa1b"
D, [2023-10-20T16:32:24.598880 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 559931400908104242
Parent ID: 0
Trace ID: 3603310404679319359
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerIpAddress#to_s when ipv6 with suffix example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:23
Error: 0
Start: 1697812344598021120
End: 1697812344598277888
Duration: 0.00025800010189414024
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerIpAddress#to_s when ipv6 with suffix example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:23,
   test.suite => ./spec/middleman-core/preview_server/server_ip_address_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

      without suffix
        is expected to eq "2607:f700:8000:12e:b3d9:1cba:b52:aa1b"
D, [2023-10-20T16:32:24.599598 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 4541560544165411046
Parent ID: 0
Trace ID: 2994351446502763588
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerIpAddress#to_s when ipv6 without suffix example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:17
Error: 0
Start: 1697812344598977024
End: 1697812344599079936
Duration: 0.00010300008580088615
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerIpAddress#to_s when ipv6 without suffix example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:17,
   test.suite => ./spec/middleman-core/preview_server/server_ip_address_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ipv4
      is expected to eq "127.0.0.1"
D, [2023-10-20T16:32:24.600492 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 824294911902833181
Parent ID: 0
Trace ID: 3281699740077517065
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerIpAddress#to_s when ipv4 example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:11
Error: 0
Start: 1697812344599842048
End: 1697812344599959040
Duration: 0.00011799996718764305
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerIpAddress#to_s when ipv4 example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:11,
   test.suite => ./spec/middleman-core/preview_server/server_ip_address_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  #to_browser
    when ipv6
      is expected to eq "[2607:f700:8000:12e:b3d9:1cba:b52:aa1b]"
D, [2023-10-20T16:32:24.601802 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2901794325908548770
Parent ID: 0
Trace ID: 132753160009028525
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerIpAddress#to_browser when ipv6 example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:40
Error: 0
Start: 1697812344601008896
End: 1697812344601218048
Duration: 0.00020900019444525242
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerIpAddress#to_browser when ipv6 example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:40,
   test.suite => ./spec/middleman-core/preview_server/server_ip_address_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ip_address
      is expected to eq "127.0.0.1"
D, [2023-10-20T16:32:24.602851 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 435156842786726046
Parent ID: 0
Trace ID: 2812371768523994998
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerIpAddress#to_browser when ip_address example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:30
Error: 0
Start: 1697812344602075904
End: 1697812344602216960
Duration: 0.00013999990187585354
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerIpAddress#to_browser when ip_address example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:30,
   test.suite => ./spec/middleman-core/preview_server/server_ip_address_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ipv4
      is expected to eq "127.0.0.1"
D, [2023-10-20T16:32:24.603926 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 3128262709503631037
Parent ID: 0
Trace ID: 987249329290971572
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerIpAddress#to_browser when ipv4 example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:35
Error: 0
Start: 1697812344603258112
End: 1697812344603376896
Duration: 0.00011899997480213642
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerIpAddress#to_browser when ipv4 example at ./spec/middleman-core/preview_server/server_ip_address_spec.rb:35,
   test.suite => ./spec/middleman-core/preview_server/server_ip_address_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]


Middleman::PreviewServer::ServerHostname
  #to_s
    when hostname
      is expected to eq "www.example.com"
D, [2023-10-20T16:32:24.604967 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2912204122961798009
Parent ID: 0
Trace ID: 1776122565528903724
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerHostname#to_s when hostname example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:10
Error: 0
Start: 1697812344604376064
End: 1697812344604514048
Duration: 0.00013800011947751045
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerHostname#to_s when hostname example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:10,
   test.suite => ./spec/middleman-core/preview_server/server_hostname_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ipv6
      is expected to eq "2607:f700:8000:12e:b3d9:1cba:b52:aa1b"
D, [2023-10-20T16:32:24.605604 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 494972448935532510
Parent ID: 0
Trace ID: 1091622995162690438
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerHostname#to_s when ipv6 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:20
Error: 0
Start: 1697812344605053952
End: 1697812344605158912
Duration: 0.0001050001010298729
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerHostname#to_s when ipv6 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:20,
   test.suite => ./spec/middleman-core/preview_server/server_hostname_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ipv4
      is expected to eq "127.0.0.1"
D, [2023-10-20T16:32:24.606360 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 185158941330146597
Parent ID: 0
Trace ID: 2758687210538724133
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerHostname#to_s when ipv4 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:15
Error: 0
Start: 1697812344605689088
End: 1697812344605793024
Duration: 0.0001050001010298729
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerHostname#to_s when ipv4 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:15,
   test.suite => ./spec/middleman-core/preview_server/server_hostname_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

  #to_browser
    when hostname
      is expected to eq "www.example.com"
D, [2023-10-20T16:32:24.607042 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 1075458464770051818
Parent ID: 0
Trace ID: 850943289060544033
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerHostname#to_browser when hostname example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:26
Error: 0
Start: 1697812344606508032
End: 1697812344606608896
Duration: 0.00010099983774125576
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerHostname#to_browser when hostname example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:26,
   test.suite => ./spec/middleman-core/preview_server/server_hostname_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ipv6
      is expected to eq "::1"
D, [2023-10-20T16:32:24.607649 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 2691668226864724140
Parent ID: 0
Trace ID: 2877818123114526506
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerHostname#to_browser when ipv6 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:36
Error: 0
Start: 1697812344607119104
End: 1697812344607218944
Duration: 9.999983012676239e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerHostname#to_browser when ipv6 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:36,
   test.suite => ./spec/middleman-core/preview_server/server_hostname_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]

    when ipv4
      is expected to eq "127.0.0.1"
D, [2023-10-20T16:32:24.608244 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/tracing/tracer.rb:516:in `write') Writing 1 spans (enabled: true)
[
 Name: rspec.example
Span ID: 434154722895198356
Parent ID: 0
Trace ID: 803323804127373504
Type: test
Service: middleman
Resource: Middleman::PreviewServer::ServerHostname#to_browser when ipv4 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:31
Error: 0
Start: 1697812344607728128
End: 1697812344607816960
Duration: 8.899997919797897e-05
Tags: [
   env => ci,
   span.kind => test,
   ci.workspace_path => /Users/andrey.marchenko/p/middleman,
   git.branch => main,
   git.repository_url => git@github.com:anmarchenko/middleman.git,
   git.commit.author.date => 2023-10-20T14:30:09+00:00,
   git.commit.author.email => andrey.marchenko@datadoghq.com,
   git.commit.author.name => Andrey Marchenko,
   git.commit.committer.date => 2023-10-20T14:30:09+00:00,
   git.commit.committer.email => andrey.marchenko@datadoghq.com,
   git.commit.committer.name => Andrey Marchenko,
   git.commit.message => tests.txt,
   git.commit.sha => 2d7d3debc014b217b5c7db4643fbc8281f12fbc8,
   test.framework => rspec,
   test.framework_version => 3.10.1,
   test.name => Middleman::PreviewServer::ServerHostname#to_browser when ipv4 example at ./spec/middleman-core/preview_server/server_hostname_spec.rb:31,
   test.suite => ./spec/middleman-core/preview_server/server_hostname_spec.rb,
   test.type => test,
   os.architecture => arm64,
   os.platform => darwin22,
   runtime.name => ruby,
   runtime.version => 3.2.2,
   test.status => pass,
   _dd.origin => ciapp-test]
Metrics: [
   _dd.measured => 1.0,
   _dd.top_level => 1.0]]


Finished in 1.12 seconds (files took 0.55869 seconds to load)
67 examples, 0 failures

Randomized with seed 21681

Coverage report generated for Cucumber Features, RSpec to /Users/andrey.marchenko/p/middleman/middleman-core/coverage. 3618 / 4084 LOC (88.59%) covered.
D, [2023-10-20T16:32:24.718272 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/test_visibility/transport.rb:42:in `send_traces') Sending 66 traces...
D, [2023-10-20T16:32:24.718941 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/test_visibility/transport.rb:53:in `block in send_traces') Send chunk of 66 events; payload size 82593
D, [2023-10-20T16:32:24.719510 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/transport/http.rb:39:in `request') Sending post request: host=citestcycle-intake.datadoghq.eu; port=443; ssl_enabled=true; compression_enabled=true; path=/api/v2/citestcycle; payload_size=5083
D, [2023-10-20T16:32:24.864795 #58791] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/test_visibility/transport.rb:59:in `block in send_traces') Received server response: Datadog::Core::Transport::HTTP::Adapters::Net::Response ok?:true unsupported?:false, not_found?:false, client_error?:false, server_error?:false, internal_error?:, payload:{}, http_response:#<Net::HTTPAccepted:0x0000000106e376d0>
W, [2023-10-20T16:32:26.012826 #58870]  WARN -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/configuration/settings.rb:52:in `block (3 levels) in add_settings!') Unable to patch cucumber (                  Available?: true, Loaded?: true,
                  Compatible?: false, Patchable?: false"
)
D, [2023-10-20T16:32:26.012956 #58870] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/p/datadog-ci-rb/lib/datadog/ci/configuration/components.rb:75:in `build_agentless_transport') CI visibility configured to use agentless transport
I, [2023-10-20T16:32:26.016192 #58870]  INFO -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/core/diagnostics/environment_logger.rb:13:in `log_configuration!') DATADOG CONFIGURATION - PROFILING - {"profiling_enabled":false}
D, [2023-10-20T16:32:26.016401 #58870] DEBUG -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/core/configuration/components.rb:116:in `startup!') Profiling is disabled
I, [2023-10-20T16:32:26.016523 #58870]  INFO -- ddtrace: [ddtrace] (/Users/andrey.marchenko/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/ddtrace-1.15.0/lib/datadog/core/diagnostics/environment_logger.rb:13:in `log_configuration!') DATADOG CONFIGURATION - CORE - {"date":"2023-10-20T16:32:26+02:00","os_name":"arm64-apple-darwin22","version":"1.15.0","lang":"ruby","lang_version":"3.2.2","env":"ci","service":"middleman","dd_version":null,"debug":true,"tags":"env:ci","runtime_metrics_enabled":false,"vm":"ruby-3.2.2","health_metrics_enabled":false}
Using the default profile...
Feature: Assets get file hashes appended to them and references to them are updated

  Scenario: Hashed-asset files are produced, and HTML, CSS, JSON and JavaScript gets rewritten to reference the new files[90m                        # features/asset_hash.feature:2[0m
    [32mGiven a successfully built app at "[32m[1masset-hash-app[0m[0m[32m"[90m                                                                                           # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                                                                                         # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                                                                                       # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html                         [0m[0m |[0m
      | [36mapple-touch-icon.png               [0m[0m |[0m
      | [36mfavicon.ico                        [0m[0m |[0m
      | [36mimages/100px-1242c368.png          [0m[0m |[0m
      | [36mimages/100px-5fd6fb90.jpg          [0m[0m |[0m
      | [36mimages/200px-c11eb203.jpg          [0m[0m |[0m
      | [36mimages/300px-59adce76.jpg          [0m[0m |[0m
      | [36mimages/100px-5fd6fb90.gif          [0m[0m |[0m
      | [36mjavascripts/application-1d8d5276.js[0m[0m |[0m
      | [36mstylesheets/site-8bc55985.css      [0m[0m |[0m
      | [36mindex.html                         [0m[0m |[0m
      | [36msubdir/index.html                  [0m[0m |[0m
      | [36mother/index.html                   [0m[0m |[0m
      | [36mapi.json                           [0m[0m |[0m
      | [36msubdir/api.json                    [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                                                                                                    # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mimages/100px.png          [0m[0m |[0m
      | [36mimages/100px.jpg          [0m[0m |[0m
      | [36mimages/100px.gif          [0m[0m |[0m
      | [36mjavascripts/application.js[0m[0m |[0m
      | [36mstylesheets/site.css      [0m[0m |[0m
    [32mAnd the file "[32m[1mjavascripts/application-1d8d5276.js[0m[0m[32m" should contain "[32m[1mimg.src = '/images/100px-5fd6fb90.jpg'[0m[0m[32m"[90m                                   # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mstylesheets/site-8bc55985.css[0m[0m[32m" should contain:[90m                                                                                 # aruba-0.7.4/lib/aruba/cucumber.rb:363[0m[0m
[32m      """[0m
[32m      background-image: url("../images/100px-5fd6fb90.jpg")[0m
[32m      """[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1mhref="apple-touch-icon.png"[0m[0m[32m'[90m                                                                       # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1mhref="stylesheets/site-8bc55985.css"[0m[0m[32m'[90m                                                              # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrc="javascripts/application-1d8d5276.js"[0m[0m[32m'[90m                                                         # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrc="images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                                   # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/index.html[0m[0m[32m" should contain '[32m[1mhref="../stylesheets/site-8bc55985.css"[0m[0m[32m'[90m                                                    # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrcset="images/100px-5fd6fb90.jpg 1x, images/200px-c11eb203.jpg 2x, images/300px-59adce76.jpg 3x"[0m[0m[32m'[90m # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrc="images/100px-5fd6fb90.gif"[0m[0m[32m'[90m                                                                   # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrc="images/100px-1242c368.png"[0m[0m[32m'[90m                                                                   # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/index.html[0m[0m[32m" should contain '[32m[1msrc="../javascripts/application-1d8d5276.js"[0m[0m[32m'[90m                                               # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/index.html[0m[0m[32m" should contain '[32m[1msrc="../images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                         # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mother/index.html[0m[0m[32m" should contain '[32m[1mhref="../stylesheets/site-8bc55985.css"[0m[0m[32m'[90m                                                     # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mother/index.html[0m[0m[32m" should contain '[32m[1msrc="../javascripts/application-1d8d5276.js"[0m[0m[32m'[90m                                                # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mother/index.html[0m[0m[32m" should contain '[32m[1msrc="../images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                          # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mapi.json[0m[0m[32m" should contain '[32m[1mimages/100px-5fd6fb90.gif[0m[0m[32m'[90m                                                                           # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mapi.json[0m[0m[32m" should contain '[32m[1mimages/100px-5fd6fb90.jpg[0m[0m[32m'[90m                                                                           # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mapi.json[0m[0m[32m" should contain '[32m[1mimages/100px-1242c368.png[0m[0m[32m'[90m                                                                           # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/api.json[0m[0m[32m" should contain '[32m[1mimages/100px-5fd6fb90.gif[0m[0m[32m'[90m                                                                    # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/api.json[0m[0m[32m" should contain '[32m[1mimages/100px-5fd6fb90.jpg[0m[0m[32m'[90m                                                                    # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/api.json[0m[0m[32m" should contain '[32m[1mimages/100px-1242c368.png[0m[0m[32m'[90m                                                                    # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m

  Scenario: Hashed fonts assets work with woff and woff2 extension[90m                                                              # features/asset_hash.feature:53[0m
    [32mGiven a successfully built app at "[32m[1masset-hash-app[0m[0m[32m"[90m                                                                          # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                                                                        # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                                                                      # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mfonts/fontawesome-webfont-56ce13e7.woff [0m[0m |[0m
      | [36mfonts/fontawesome-webfont-10752316.woff2[0m[0m |[0m
    [32mAnd the file "[32m[1mstylesheets/uses_fonts-88aa3e2b.css[0m[0m[32m" should contain "[32m[1msrc: url('../fonts/fontawesome-webfont-10752316.woff2')[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mstylesheets/uses_fonts-88aa3e2b.css[0m[0m[32m" should contain "[32m[1murl('../fonts/fontawesome-webfont-56ce13e7.woff')[0m[0m[32m"[90m       # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Hashed assets work in preview server[90m                                                                         # features/asset_hash.feature:62[0m
    [32mGiven the Server is running at "[32m[1masset-hash-app[0m[0m[32m"[90m                                                                      # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/[0m[0m[32m"[90m                                                                                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="apple-touch-icon.png"[0m[0m[32m'[90m                                                                      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mhref="stylesheets/site-47c40978.css"[0m[0m[32m'[90m                                                              # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mhref="stylesheets/fragment-313b648b.css"[0m[0m[32m'[90m                                                          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="javascripts/application-1d8d5276.js"[0m[0m[32m'[90m                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                                   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrcset="images/100px-5fd6fb90.jpg 1x, images/200px-c11eb203.jpg 2x, images/300px-59adce76.jpg 3x"[0m[0m[32m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="images/100px-5fd6fb90.jpg?test"[0m[0m[32m'[90m                                                              # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="images/100px-5fd6fb90.jpg?#test"[0m[0m[32m'[90m                                                             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="images/100px-5fd6fb90.jpg#test"[0m[0m[32m'[90m                                                              # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/subdir/[0m[0m[32m"[90m                                                                                              # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="../stylesheets/site-47c40978.css"[0m[0m[32m'[90m                                                          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../javascripts/application-1d8d5276.js"[0m[0m[32m'[90m                                                      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                                # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/other/[0m[0m[32m"[90m                                                                                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="../stylesheets/site-47c40978.css"[0m[0m[32m'[90m                                                          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../javascripts/application-1d8d5276.js"[0m[0m[32m'[90m                                                      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                                # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../images/100px-5fd6fb90.jpg?test"[0m[0m[32m'[90m                                                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../images/100px-5fd6fb90.jpg?#test"[0m[0m[32m'[90m                                                          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="../images/100px-5fd6fb90.jpg#test"[0m[0m[32m'[90m                                                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/javascripts/application-1d8d5276.js[0m[0m[32m"[90m                                                                  # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mimg.src = '/images/100px-5fd6fb90.jpg'[0m[0m[32m"[90m                                                           # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/site-47c40978.css[0m[0m[32m"[90m                                                                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mbackground-image: url("../images/100px-5fd6fb90.jpg");[0m[0m[32m'[90m                                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/api.json[0m[0m[32m"[90m                                                                                             # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mimages/100px-5fd6fb90.gif[0m[0m[32m'[90m                                                                        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mimages/100px-5fd6fb90.jpg[0m[0m[32m'[90m                                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mimages/100px-1242c368.png[0m[0m[32m'[90m                                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/subdir/api.json[0m[0m[32m"[90m                                                                                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mimages/100px-5fd6fb90.gif[0m[0m[32m'[90m                                                                        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mimages/100px-5fd6fb90.jpg[0m[0m[32m'[90m                                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mimages/100px-1242c368.png[0m[0m[32m'[90m                                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/fragment-313b648b.css[0m[0m[32m"[90m                                                                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mAnd I should see '[32m[1murl("../images/100px-5fd6fb90.jpg");[0m[0m[32m'[90m                                                              # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("../images/100px-5fd6fb90.jpg?test");[0m[0m[32m'[90m                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("../images/100px-5fd6fb90.jpg?#test");[0m[0m[32m'[90m                                                        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("../images/100px-5fd6fb90.jpg#test");[0m[0m[32m'[90m                                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Hashed assets work with Slim[90m                                                                                 # features/asset_hash.feature:103[0m
    [32mGiven the Server is running at "[32m[1masset-hash-app[0m[0m[32m"[90m                                                                      # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/slim.html[0m[0m[32m"[90m                                                                                            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mAnd I should see '[32m[1msrc="images/300px-59adce76.jpg"[0m[0m[32m'[90m                                                                   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                                                                   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrcset="images/100px-5fd6fb90.jpg 1x, images/200px-c11eb203.jpg 2x, images/300px-59adce76.jpg 3x"[0m[0m[32m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Enabling an asset host still produces hashed files and references (hash first)[90m # features/asset_hash.feature:110[0m
    [32mGiven a fixture app "[32m[1masset-hash-host-app[0m[0m[32m"[90m                                              # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                                     # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      set :sass_source_maps, false[0m
[32m      activate :asset_hash[0m
[32m      activate :directory_indexes[0m
[32m      activate :asset_host, host: 'http://middlemanapp.com'[0m
[32m      """[0m
    [32mGiven the Server is running at "[32m[1masset-hash-host-app[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/[0m[0m[32m"[90m                                                                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/site-7474cadd.css"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/fragment-2902933e.css"[0m[0m[32m'[90m   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?#test"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg#test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/subdir/[0m[0m[32m"[90m                                                                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/site-7474cadd.css"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/other/[0m[0m[32m"[90m                                                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/site-7474cadd.css"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?#test"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg#test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/fragment-2902933e.css[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg");[0m[0m[32m'[90m           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg?test");[0m[0m[32m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg?#test");[0m[0m[32m'[90m     # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg#test");[0m[0m[32m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Enabling an asset host still produces hashed files and references (host first)[90m # features/asset_hash.feature:142[0m
    [32mGiven a fixture app "[32m[1masset-hash-host-app[0m[0m[32m"[90m                                              # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                                     # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      set :sass_source_maps, false[0m
[32m      activate :asset_host, host: 'http://middlemanapp.com'[0m
[32m      activate :directory_indexes[0m
[32m      activate :asset_hash[0m
[32m      """[0m
    [32mGiven the Server is running at "[32m[1masset-hash-host-app[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/[0m[0m[32m"[90m                                                                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/site-7474cadd.css"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/fragment-2902933e.css"[0m[0m[32m'[90m   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?#test"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg#test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/subdir/[0m[0m[32m"[90m                                                                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/site-7474cadd.css"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/other/[0m[0m[32m"[90m                                                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mhref="http://middlemanapp.com/stylesheets/site-7474cadd.css"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m             # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg?#test"[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1msrc="http://middlemanapp.com/images/100px-5fd6fb90.jpg#test"[0m[0m[32m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/fragment-2902933e.css[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg")[0m[0m[32m'[90m            # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg?test")[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg?#test")[0m[0m[32m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1murl("http://middlemanapp.com/images/100px-5fd6fb90.jpg#test")[0m[0m[32m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Hashed-asset files are not produced for ignored paths[90m # features/asset_hash.feature:210[0m
    [32mGiven a fixture app "[32m[1masset-hash-app[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                            # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      is_stylesheet = proc { |path| path.start_with? 'stylesheets' }[0m
[32m      activate :asset_hash, ignore: [[0m
[32m      %r(javascripts/*),[0m
[32m      'images/*',[0m
[32m      is_stylesheet[0m
[32m      ][0m
[32m      activate :relative_assets[0m
[32m      activate :directory_indexes[0m
[32m      """[0m
    [32mAnd a successfully built app at "[32m[1masset-hash-app[0m[0m[32m"[90m              # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                          # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                        # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html                [0m[0m |[0m
      | [36mapple-touch-icon.png      [0m[0m |[0m
      | [36mfavicon.ico               [0m[0m |[0m
      | [36mimages/100px.png          [0m[0m |[0m
      | [36mimages/100px.jpg          [0m[0m |[0m
      | [36mimages/100px.gif          [0m[0m |[0m
      | [36mjavascripts/application.js[0m[0m |[0m
      | [36mstylesheets/site.css      [0m[0m |[0m
      | [36mindex.html                [0m[0m |[0m
      | [36msubdir/index.html         [0m[0m |[0m
      | [36mother/index.html          [0m[0m |[0m
      | [36mapi.json                  [0m[0m |[0m
      | [36msubdir/api.json           [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                     # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mimages/100px-1242c368.png          [0m[0m |[0m
      | [36mimages/100px-5fd6fb90.jpg          [0m[0m |[0m
      | [36mimages/100px-5fd6fb90.gif          [0m[0m |[0m
      | [36mjavascripts/application-1d8d5276.js[0m[0m |[0m
      | [36mstylesheets/site-7474cadd.css      [0m[0m |[0m

  Scenario: Hashed-asset files are not replaced for rewrite ignored paths[90m                             # features/asset_hash.feature:246[0m
    [32mGiven a fixture app "[32m[1masset-hash-app[0m[0m[32m"[90m                                                              # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                                                # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      is_stylesheet = proc { |path| path.start_with? '/stylesheets' }[0m
[32m      activate :asset_hash, rewrite_ignore: [[0m
[32m      %r(javascripts/*),[0m
[32m      '/subdir/*',[0m
[32m      is_stylesheet[0m
[32m      ][0m
[32m      activate :relative_assets[0m
[32m      activate :directory_indexes[0m
[32m      """[0m
    [32mAnd a successfully built app at "[32m[1masset-hash-app[0m[0m[32m"[90m                                                  # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                                              # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                                            # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html                         [0m[0m |[0m
      | [36msubdir/index.html                  [0m[0m |[0m
      | [36mimages/100px-5fd6fb90.jpg          [0m[0m |[0m
      | [36mjavascripts/application-1d8d5276.js[0m[0m |[0m
      | [36mstylesheets/site-8bc55985.css      [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                                                         # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mimages/100px.jpg          [0m[0m |[0m
      | [36mjavascripts/application.js[0m[0m |[0m
      | [36mstylesheets/site.css      [0m[0m |[0m
    [32mAnd the file "[32m[1mjavascripts/application-1d8d5276.js[0m[0m[32m" should contain "[32m[1mimg.src = '/images/100px.jpg'[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mstylesheets/site-8bc55985.css[0m[0m[32m" should contain:[90m                                      # aruba-0.7.4/lib/aruba/cucumber.rb:363[0m[0m
[32m      """[0m
[32m      background-image: url("../images/100px.jpg")[0m
[32m      """[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1mhref="stylesheets/site-8bc55985.css"[0m[0m[32m'[90m                   # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrc="javascripts/application-1d8d5276.js"[0m[0m[32m'[90m              # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain '[32m[1msrc="images/100px-5fd6fb90.jpg"[0m[0m[32m'[90m                        # lib/middleman-core/step_definitions/middleman_steps.rb:54[0m[0m
    [32mAnd the file "[32m[1msubdir/index.html[0m[0m[32m" should contain:[90m                                                  # aruba-0.7.4/lib/aruba/cucumber.rb:363[0m[0m
[32m      """[0m
[32m      <h2>Image url3:</h2>[0m
[32m      <p><img src="../images/100px.jpg"></p>[0m
[32m      """[0m

  Scenario: Already minified files should still be hashed[90m        # features/asset_hash.feature:285[0m
    [32mGiven a successfully built app at "[32m[1masset-hash-minified-app[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                         # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                       # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mjavascripts/jquery.min-276c87ff.js[0m[0m |[0m
      | [36mstylesheets/test-7de2ad06.css     [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                    # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mjavascripts/jquery.min.js[0m[0m |[0m
    [32mAnd the file "[32m[1mstylesheets/test-7de2ad06.css[0m[0m[32m" should contain:[90m # aruba-0.7.4/lib/aruba/cucumber.rb:363[0m[0m
[32m      """[0m
[32m      .no-bug{background-image:url(/images/100px-5fd6fb90.jpg)}[0m
[32m      .bug{content:"";background-image:url(/images/100px-5fd6fb90.jpg)}[0m
[32m      .no-bug{content:""; background-image:url(/images/100px-5fd6fb90.jpg)}[0m
[32m      """[0m

  Scenario: Source map paths include the hash[90m                                                                            # features/asset_hash.feature:300[0m
    [32mGiven a successfully built app at "[32m[1masset-hash-source-map[0m[0m[32m"[90m                                                            # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                                                                 # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                                                               # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html                             [0m[0m |[0m
      | [36mjavascripts/application-4553338c.js    [0m[0m |[0m
      | [36mjavascripts/application.js-22cc2b5f.map[0m[0m |[0m
      | [36mindex.html                             [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                                                                            # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mjavascripts/application.js    [0m[0m |[0m
      | [36mjavascripts/application.js.map[0m[0m |[0m
    [32mAnd the file "[32m[1mjavascripts/application-4553338c.js[0m[0m[32m" should contain "[32m[1m//# sourceMappingURL=application.js-22cc2b5f.map[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Hashes can contain a prefix[90m                                                                                                    # features/asset_hash.feature:314[0m
    [32mGiven a successfully built app at "[32m[1masset-hash-prefix[0m[0m[32m"[90m                                                                                  # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                                                                                   # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                                                                                 # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html                                      [0m[0m |[0m
      | [36mjavascripts/application-myprefix-4553338c.js    [0m[0m |[0m
      | [36mjavascripts/application.js-myprefix-22cc2b5f.map[0m[0m |[0m
      | [36mindex.html                                      [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                                                                                              # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mjavascripts/application.js    [0m[0m |[0m
      | [36mjavascripts/application.js.map[0m[0m |[0m
    [32mAnd the file "[32m[1mjavascripts/application-myprefix-4553338c.js[0m[0m[32m" should contain "[32m[1m//# sourceMappingURL=application.js-myprefix-22cc2b5f.map[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Filenames can be removed by option[90m                                                # features/asset_hash.feature:328[0m
    [32mGiven a successfully built app at "[32m[1masset-hash-remove-filename[0m[0m[32m"[90m                            # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                                      # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                                    # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html              [0m[0m |[0m
      | [36mjavascripts/4553338c.js [0m[0m |[0m
      | [36mjavascripts/22cc2b5f.map[0m[0m |[0m
      | [36mindex.html              [0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                                                 # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mjavascripts/application.js    [0m[0m |[0m
      | [36mjavascripts/application.js.map[0m[0m |[0m
    [32mAnd the file "[32m[1mjavascripts/4553338c.js[0m[0m[32m" should contain "[32m[1m//# sourceMappingURL=22cc2b5f.map[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

Feature: Alternate between multiple asset hosts

  Scenario: Set single host with inline-option[90m                                                            # features/asset_host.feature:3[0m
    [32mGiven a fixture app "[32m[1masset-host-app[0m[0m[32m"[90m                                                                  # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                                                    # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      activate :asset_host, host: "http://assets1.example.com"[0m
[32m      """[0m
    [32mAnd the Server is running[90m                                                                             # lib/middleman-core/step_definitions/server_steps.rb:34[0m[0m
    [32mWhen I go to "[32m[1m/asset_host.html[0m[0m[32m"[90m                                                                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m'.google-analytics.com/ga.js'[0m[0m[32m"[90m                                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see '[32m[1msrc="https://code.jquery.com/jquery-2.1.3.min.js"[0m[0m[32m'[90m                                 # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mThen I should not see content matching %r{[32m[1mhttp://assets1.example.com//[0m[0m[32m}[90m                               # lib/middleman-core/step_definitions/server_steps.rb:111[0m[0m
    [32mThen I should see content matching %r{[32m[1m<a href="https://github.com/angular/angular.js">Angular.js</a>[0m[0m[32m}[90m # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mThen I should see content matching %r{[32m[1m'//www.example.com/script.js'[0m[0m[32m}[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/asset_host.css[0m[0m[32m"[90m                                                            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mThen I should not see content matching %r{[32m[1mhttp://assets1.example.com//[0m[0m[32m}[90m                               # lib/middleman-core/step_definitions/server_steps.rb:111[0m[0m
    [32mWhen I go to "[32m[1m/javascripts/asset_host.js[0m[0m[32m"[90m                                                             # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should not see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m                                # lib/middleman-core/step_definitions/server_steps.rb:111[0m[0m

  Scenario: Set proc host with inline-option[90m                                                              # features/asset_host.feature:23[0m
    [32mGiven a fixture app "[32m[1masset-host-app[0m[0m[32m"[90m                                                                  # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                                                    # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      activate :asset_host, host: Proc.new { |asset|[0m
[32m        hash = Digest::MD5.digest(asset).bytes.map!(&:ord).reduce(&:+)[0m
[32m        "http://assets%d.example.com" % (hash % 4)[0m
[32m      }[0m
[32m      """[0m
    [32mAnd the Server is running[90m                                                                             # lib/middleman-core/step_definitions/server_steps.rb:34[0m[0m
    [32mWhen I go to "[32m[1m/asset_host.html[0m[0m[32m"[90m                                                                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1msrc="https://code.jquery.com/jquery-2.1.3.min.js"[0m[0m[32m'[90m                                 # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mThen I should not see content matching %r{[32m[1mhttp://assets1.example.com//[0m[0m[32m}[90m                               # lib/middleman-core/step_definitions/server_steps.rb:111[0m[0m
    [32mThen I should see content matching %r{[32m[1m<a href="https://github.com/angular/angular.js">Angular.js</a>[0m[0m[32m}[90m # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mThen I should see content matching %r{[32m[1m'//www.example.com/script.js'[0m[0m[32m}[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/asset_host.css[0m[0m[32m"[90m                                                            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mThen I should not see content matching %r{[32m[1mhttp://assets1.example.com//[0m[0m[32m}[90m                               # lib/middleman-core/step_definitions/server_steps.rb:111[0m[0m

  Scenario: Hosts are not rewritten for rewrite ignored paths[90m              # features/asset_host.feature:43[0m
    [32mGiven a fixture app "[32m[1masset-host-app[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                     # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      activate :asset_host, host: "http://assets1.example.com", rewrite_ignore: [[0m
[32m        '/stylesheets/asset_host.css',[0m
[32m      ][0m
[32m      """[0m
    [32mAnd the Server is running[90m                                              # lib/middleman-core/step_definitions/server_steps.rb:34[0m[0m
    [32mWhen I go to "[32m[1m/asset_host.html[0m[0m[32m"[90m                                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m     # lib/middleman-core/step_definitions/server_steps.rb:107[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/asset_host.css[0m[0m[32m"[90m                             # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should not see content matching %r{[32m[1mhttp://assets1.example.com/[0m[0m[32m}[90m # lib/middleman-core/step_definitions/server_steps.rb:111[0m[0m

Feature: Provide Sane Defaults for Layout Behavior

  Scenario: Template and Layout of same engine exist[90m        # features/auto_layout.feature:3[0m
    [32mGiven the Server is running at "[32m[1mengine-matching-layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                              # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mComment in layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Template and Layout of different engine[90m          # features/auto_layout.feature:8[0m
    [32mGiven the Server is running at "[32m[1mdifferent-engine-layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mComment in layout[0m[0m[32m"[90m                    # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Multiple layouts exist, prefer same engine[90m # features/auto_layout.feature:13[0m
    [32mGiven the Server is running at "[32m[1mmultiple-layouts[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mERb Comment in layout[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: No layout exists[90m                   # features/auto_layout.feature:18[0m
    [32mGiven the Server is running at "[32m[1mno-layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should not see "[32m[1mComment in layout[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: Manually set default layout in config (exists)[90m # features/auto_layout.feature:23[0m
    [32mGiven the Server is running at "[32m[1mmanual-layout[0m[0m[32m"[90m         # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                             # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Comment in layout[0m[0m[32m"[90m           # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Manually set default layout in config (does not exist)[90m # features/auto_layout.feature:28[0m
    [32mGiven the Server is running at "[32m[1mmanual-layout-missing[0m[0m[32m"[90m         # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mError[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Overwrite manual layout[90m                         # features/auto_layout.feature:33[0m
    [32mGiven the Server is running at "[32m[1mmanual-layout-override[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                              # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mAnother Comment in layout[0m[0m[32m"[90m           # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

Feature: Automatically detect and insert image dimensions into tags
  In order to speed up development and appease YSlow

  Scenario: Rendering an image with the feature enabled[90m   # features/automatic_alt_tags.feature:4[0m
    [32mGiven "[32m[1mautomatic_alt_tags[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mautomatic-alt-tags-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/auto-image-sizes.html[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1malt="Blank"[0m[0m[32m'[90m                       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

Feature: Map special characters to automatically put files in a directory

  Scenario: Building files with special character escape[90m                # features/automatic_directory_matcher.feature:3[0m
    [32mGiven a successfully built app at "[32m[1mautomatic-directory-matcher-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                              # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mroot.html             [0m[0m |[0m
      | [36mroot-plain.html       [0m[0m |[0m
      | [36msub/sub.html          [0m[0m |[0m
      | [36msub/sub-plain.html    [0m[0m |[0m
      | [36msub/sub/sub.html      [0m[0m |[0m
      | [36msub/sub/sub-plain.html[0m[0m |[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m                          # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36msub--sub.html           [0m[0m |[0m
      | [36msub--sub-plain.html     [0m[0m |[0m
      | [36msub--sub--sub.html      [0m[0m |[0m
      | [36msub--sub--sub-plain.html[0m[0m |[0m

  Scenario: Previewing files with special character escape[90m           # features/automatic_directory_matcher.feature:19[0m
    [32mGiven the Server is running at "[32m[1mautomatic-directory-matcher-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/root.html[0m[0m[32m"[90m                                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mRoot Erb[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/root-plain.html[0m[0m[32m"[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mRoot Plain[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/sub/sub.html[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mSub1 Erb[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/sub/sub-plain.html[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mSub1 Plain[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/sub/sub/sub.html[0m[0m[32m"[90m                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mSub2 Erb[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/sub/sub/sub-plain.html[0m[0m[32m"[90m                           # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mSub2 Plain[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

Feature: Automatically detect and insert image dimensions into tags
  In order to speed up development and appease YSlow

  Scenario: Rendering an image with the feature disabled[90m    # features/automatic_image_sizes.feature:4[0m
    [32mGiven a fixture app "[32m[1mautomatic-image-size-app[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mautomatic-image-size-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/auto-image-sizes.html[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should not see "[32m[1mwidth=[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [32mAnd I should not see "[32m[1mheight=[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [32mWhen I go to "[32m[1m/markdown-sizes.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should not see "[32m[1mwidth=[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [32mAnd I should not see "[32m[1mheight=[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: Rendering an image with the feature enabled[90m     # features/automatic_image_sizes.feature:17[0m
    [32mGiven a fixture app "[32m[1mautomatic-image-size-app[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      activate :automatic_image_sizes[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mautomatic-image-size-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/auto-image-sizes.html[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mwidth="1"[0m[0m[32m'[90m                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mheight="1"[0m[0m[32m'[90m                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/markdown-sizes.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mwidth="1"[0m[0m[32m'[90m                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mAnd I should see '[32m[1mheight="1"[0m[0m[32m'[90m                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

Feature: Builder
  In order to output static html and css for delivery

  Scenario: Checking built folder for content[90m                    # features/builder.feature:4[0m
    [32mGiven a successfully built app at "[32m[1mlarge-build-app[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                         # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                       # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html                                   [0m[0m |[0m
      | [36mstatic.html                                  [0m[0m |[0m
      | [36mservices/index.html                          [0m[0m |[0m
      | [36mstylesheets/static.css                       [0m[0m |[0m
      | [36mimages/blank.gif                             [0m[0m |[0m
      | [36mimages/Read me (example).txt                 [0m[0m |[0m
      | [36mimages/Child folder/regular_file(example).txt[0m[0m |[0m
      | [36m.htaccess                                    [0m[0m |[0m
      | [36m.htpasswd                                    [0m[0m |[0m
      | [36mfeed.xml                                     [0m[0m |[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m                   # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36m_partial           [0m[0m |[0m
      | [36mlayout             [0m[0m |[0m
      | [36mlayouts/custom     [0m[0m |[0m
      | [36mlayouts/content_for[0m[0m |[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain "[32m[1mComment in layout[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain "[32m[1m<h1>Welcome</h1>[0m[0m[32m"[90m  # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mstatic.html[0m[0m[32m" should contain "[32m[1mStatic, no code![0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mservices/index.html[0m[0m[32m" should contain "[32m[1mServices[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mstylesheets/static.css[0m[0m[32m" should contain "[32m[1mbody[0m[0m[32m"[90m  # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Build glob[90m                                                       # features/builder.feature:30[0m
    [32mGiven a successfully built app at "[32m[1mglob-app[0m[0m[32m" with flags "[32m[1m--glob '*.css'[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:28[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                     # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m                               # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html[0m[0m |[0m
    [32mThen the following files should exist:[90m                                   # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mstylesheets/site.css[0m[0m |[0m

  Scenario: Build with errors[90m                    # features/builder.feature:38[0m
    [32mGiven a built app at "[32m[1mbuild-with-errors-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the exit status should be [32m[1m1[0m[0m[32m[90m             # aruba-0.7.4/lib/aruba/cucumber.rb:223[0m[0m

  Scenario: Build empty errors[90m       # features/builder.feature:42[0m
    [32mGiven a built app at "[32m[1mempty-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the exit status should be [32m[1m1[0m[0m[32m[90m # aruba-0.7.4/lib/aruba/cucumber.rb:223[0m[0m

  Scenario: Build external_pipeline errors[90m         # features/builder.feature:46[0m
    [32mGiven a built app at "[32m[1mexternal-pipeline-error[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the exit status should be [32m[1m1[0m[0m[32m[90m               # aruba-0.7.4/lib/aruba/cucumber.rb:223[0m[0m

  Scenario: Build alias (b)[90m               # features/builder.feature:50[0m
    [32mGiven a fixture app "[32m[1mlarge-build-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mWhen I run `[32m[1mmiddleman b[0m[0m[32m`[90m              # aruba-0.7.4/lib/aruba/cucumber.rb:119[0m[0m
    [32mThen was successfully built[90m           # lib/middleman-core/step_definitions/builder_steps.rb:12[0m[0m

  Scenario: Builded text file(ex: html, css, xml, txt)'s permission is 0644[90m        # features/builder.feature:55[0m
    [32mGiven a successfully built app at "[32m[1mlarge-build-app[0m[0m[32m"[90m                            # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                           # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [31mThen the mode of filesystem object "[31m[1mindex.html[0m[0m[31m" should match "[31m[1m0644[0m[0m[31m"[90m            # aruba-0.7.4/lib/aruba/cucumber.rb:379[0m[0m
[31m      undefined method `exists?' for FileTest:Module (NoMethodError)[0m
[31m      features/builder.feature:58:in `Then the mode of filesystem object "index.html" should match "0644"'[0m
    [36mAnd the mode of filesystem object "[36m[1mstylesheets/static.css[0m[0m[36m" should match "[36m[1m0644[0m[0m[36m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:379[0m[0m
    [36mAnd the mode of filesystem object "[36m[1mfeed.xml[0m[0m[36m" should match "[36m[1m0644[0m[0m[36m"[90m               # aruba-0.7.4/lib/aruba/cucumber.rb:379[0m[0m
    [36mAnd the mode of filesystem object "[36m[1m.htaccess[0m[0m[36m" should match "[36m[1m0644[0m[0m[36m"[90m              # aruba-0.7.4/lib/aruba/cucumber.rb:379[0m[0m

Feature: Generate mtime-based query string for busting browser caches
  In order to display the most recent content for IE & CDNs and appease YSlow

  Scenario: Rendering css with the feature disabled[90m # features/cache_buster.feature:4[0m
    [32mGiven "[32m[1mcache_buster[0m[0m[32m" feature is "[32m[1mdisabled[0m[0m[32m"[90m      # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/relative_assets.css[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mblank.gif"[0m[0m[32m'[90m                  # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Rendering html with the feature disabled[90m # features/cache_buster.feature:10[0m
    [32mGiven "[32m[1mcache_buster[0m[0m[32m" feature is "[32m[1mdisabled[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/cache-buster.html[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1msite.css"[0m[0m[32m'[90m                    # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Rendering css with the feature enabled[90m  # features/cache_buster.feature:16[0m
    [32mGiven "[32m[1mcache_buster[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/relative_assets.css[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mblank.gif?[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering html with the feature enabled[90m # features/cache_buster.feature:22[0m
    [32mGiven "[32m[1mcache_buster[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/cache-buster.html[0m[0m[32m"[90m               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1msite.css?[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mblank.gif?[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering css with the feature and relative_assets enabled[90m # features/cache_buster.feature:29[0m
    [32mGiven "[32m[1mrelative_assets[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mGiven "[32m[1mcache_buster[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m                    # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/relative_assets.css[0m[0m[32m"[90m                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mblank.gif?[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering html with the feature and relative_assets enabled[90m # features/cache_buster.feature:36[0m
    [32mGiven "[32m[1mrelative_assets[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m                        # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mGiven "[32m[1mcache_buster[0m[0m[32m" feature is "[32m[1menabled[0m[0m[32m"[90m                           # lib/middleman-core/step_definitions/server_steps.rb:11[0m[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/cache-buster.html[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1msite.css?[0m[0m[32m"[90m                                       # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mblank.gif?[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: URLs are not rewritten for rewrite ignored paths[90m # features/cache_buster.feature:44[0m
    [32mGiven a fixture app "[32m[1mcache-buster-app[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                       # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      activate :cache_buster, rewrite_ignore: [[0m
[32m        '/cache-buster.html',[0m
[32m      ][0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcache-buster-app[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/cache-buster.html[0m[0m[32m"[90m                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1msite.css"[0m[0m[32m'[90m                            # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mempty-with-include.js"[0m[0m[32m'[90m               # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mblank.gif"[0m[0m[32m'[90m                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

Feature: Templates should be chainable
  In order to insert variables and data in "static" engines

  Scenario: Data in Erb in Markdown[90m              # features/chained_templates.feature:4[0m
    [32mGiven the Server is running at "[32m[1mchained-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mTitle</h1>[0m[0m[32m"[90m               # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mSubtitle</h2>[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mSup</h3>[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Build chained template[90m                                      # features/chained_templates.feature:11[0m
    [32mGiven a successfully built app at "[32m[1mchained-app[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                              # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html           [0m[0m |[0m
      | [36mtest.erb.combobreaker[0m[0m |[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain "[32m[1mTitle</h1>[0m[0m[32m"[90m               # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain "[32m[1mSubtitle</h2>[0m[0m[32m"[90m            # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain "[32m[1mSup</h3>[0m[0m[32m"[90m                 # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mtest.erb.combobreaker[0m[0m[32m" should contain "[32m[1mTitle</h1>[0m[0m[32m"[90m    # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mtest.erb.combobreaker[0m[0m[32m" should contain "[32m[1mSubtitle</h2>[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mtest.erb.combobreaker[0m[0m[32m" should contain "[32m[1mSup</h3>[0m[0m[32m"[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Partials are parsed by multiple template engines: Outer template has .erb and inner .md.erb[90m # features/chained_templates.feature:24[0m
    [32mGiven a fixture app "[32m[1mpartial-chained_templates-app[0m[0m[32m"[90m                                                 # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a template named "[32m[1mmy_template.html.erb[0m[0m[32m" with:[90m                                                   # lib/middleman-core/step_definitions/server_steps.rb:71[0m[0m
[32m      """[0m
[32m      <h1>My Template</h1>[0m
[32m[0m
[32m      <%= partial 'my_partial' %>[0m
[32m      """[0m
    [32mAnd a template named "[32m[1mmy_partial.html.md.erb[0m[0m[32m" with:[90m                                                 # lib/middleman-core/step_definitions/server_steps.rb:71[0m[0m
[32m      """[0m
[32m      ## My Partial[0m
[32m[0m
[32m      <%= 'hello world' %>[0m
[32m      """[0m
    [32mAnd the Server is running[90m                                                                           # lib/middleman-core/step_definitions/server_steps.rb:34[0m[0m
    [32mWhen I go to "[32m[1m/my_template.html[0m[0m[32m"[90m                                                                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see:[90m                                                                                  # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <h1>My Template</h1>[0m
[32m      """[0m
    [32mThen I should see:[90m                                                                                  # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <h2 id="my-partial">My Partial</h2>[0m
[32m      """[0m
    [32mThen I should see:[90m                                                                                  # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <p>hello world</p>[0m
[32m      """[0m

  Scenario: Partials are parsed by multiple template engines: Outer template has .md.erb and inner .md.erb[90m # features/chained_templates.feature:53[0m
    [32mGiven a fixture app "[32m[1mpartial-chained_templates-app[0m[0m[32m"[90m                                                    # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a template named "[32m[1mmy_template.html.md.erb[0m[0m[32m" with:[90m                                                   # lib/middleman-core/step_definitions/server_steps.rb:71[0m[0m
[32m      """[0m
[32m      # My Template[0m
[32m[0m
[32m      <%= partial 'my_partial' %>[0m
[32m      """[0m
    [32mAnd a template named "[32m[1mmy_partial.html.md.erb[0m[0m[32m" with:[90m                                                    # lib/middleman-core/step_definitions/server_steps.rb:71[0m[0m
[32m      """[0m
[32m      ## My Partial[0m
[32m[0m
[32m      <%= 'hello world' %>[0m
[32m      """[0m
    [32mAnd the Server is running[90m                                                                              # lib/middleman-core/step_definitions/server_steps.rb:34[0m[0m
    [32mWhen I go to "[32m[1m/my_template.html[0m[0m[32m"[90m                                                                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see:[90m                                                                                     # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <h1 id="my-template">My Template</h1>[0m
[32m      """[0m
    [32mThen I should see:[90m                                                                                     # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <h2 id="my-partial">My Partial</h2>[0m
[32m      """[0m
    [32mThen I should see:[90m                                                                                     # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <p>hello world</p>[0m
[32m      """[0m

  Scenario: Partials are parsed by multiple template engines: Outer template has .md.erb, and inner .erb[90m # features/chained_templates.feature:82[0m
    [32mGiven a fixture app "[32m[1mpartial-chained_templates-app[0m[0m[32m"[90m                                                  # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a template named "[32m[1mmy_template.html.md.erb[0m[0m[32m" with:[90m                                                 # lib/middleman-core/step_definitions/server_steps.rb:71[0m[0m
[32m      """[0m
[32m      # My Template[0m
[32m[0m
[32m      <%= partial 'my_partial' %>[0m
[32m      """[0m
    [32mAnd a template named "[32m[1mmy_partial.html.erb[0m[0m[32m" with:[90m                                                     # lib/middleman-core/step_definitions/server_steps.rb:71[0m[0m
[32m      """[0m
[32m      <h2>My Partial</h2>[0m
[32m[0m
[32m      <%= 'hello world' %>[0m
[32m      """[0m
    [32mAnd the Server is running[90m                                                                            # lib/middleman-core/step_definitions/server_steps.rb:34[0m[0m
    [32mWhen I go to "[32m[1m/my_template.html[0m[0m[32m"[90m                                                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see:[90m                                                                                   # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <h1 id="my-template">My Template</h1>[0m
[32m      """[0m
    [32mThen I should see:[90m                                                                                   # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <h2>My Partial</h2>[0m
[32m      """[0m
    [32mThen I should see:[90m                                                                                   # lib/middleman-core/step_definitions/server_steps.rb:99[0m[0m
[32m      """[0m
[32m      <p>hello world</p>[0m
[32m      """[0m

Feature: Build Clean

  Scenario: Build and Clean an app[90m                                      # features/clean_build.feature:2[0m
    [32mGiven a fixture app "[32m[1mclean-app[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd app "[32m[1mclean-app[0m[0m[32m" is using config "[32m[1mempty[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/middleman_steps.rb:3[0m[0m
    [32mAnd a successfully built app at "[32m[1mclean-app[0m[0m[32m" with flags "[32m[1m--no-clean[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:28[0m[0m
    [32mThen the following files should exist:[90m                              # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mbuild/index.html             [0m[0m |[0m
      | [36mbuild/should_be_ignored.html [0m[0m |[0m
      | [36mbuild/should_be_ignored2.html[0m[0m |[0m
      | [36mbuild/should_be_ignored3.html[0m[0m |[0m
    [32mAnd app "[32m[1mclean-app[0m[0m[32m" is using config "[32m[1mcomplications[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/middleman_steps.rb:3[0m[0m
    [32mGiven a successfully built app at "[32m[1mclean-app[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m                          # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mbuild/should_be_ignored.html [0m[0m |[0m
      | [36mbuild/should_be_ignored2.html[0m[0m |[0m
      | [36mbuild/should_be_ignored3.html[0m[0m |[0m
    [32mAnd the file "[32m[1mbuild/index.html[0m[0m[32m" should contain "[32m[1mComment in layout[0m[0m[32m"[90m  # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Clean build has a whitelist[90m    # features/clean_build.feature:19[0m
    [32mGiven a fixture app "[32m[1mclean-app[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mWhen a file named "[32m[1mbuild/.test[0m[0m[32m" with:[90m  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      Hello[0m
[32m      """[0m
    [32mWhen a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m    # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      set :skip_build_clean do |path|[0m
[32m        path =~ /\.test/[0m
[32m      end[0m
[32m      """[0m
    [32mGiven a built app at "[32m[1mclean-app[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the following files should exist:[90m # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mbuild/.test[0m[0m |[0m

  Scenario: Clean build an app with newly ignored files and a nested output directory[90m # features/clean_build.feature:35[0m
    [32mGiven a fixture app "[32m[1mclean-nested-app[0m[0m[32m"[90m                                            # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mWhen a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                               # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      set :build_dir, "sub/dir"[0m
[32m      """[0m
    [32mGiven a built app at "[32m[1mclean-nested-app[0m[0m[32m" with flags "[32m[1m--no-clean[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/builder_steps.rb:23[0m[0m
    [32mThen a directory named "[32m[1msub/dir[0m[0m[32m" should exist[90m                                     # aruba-0.7.4/lib/aruba/cucumber.rb:355[0m[0m
    [32mThen the following directories should exist:[90m                                      # aruba-0.7.4/lib/aruba/cucumber.rb:351[0m[0m
      | [36msub/dir       [0m[0m |[0m
      | [36msub/dir/nested[0m[0m |[0m
    [32mThen the following files should exist:[90m                                            # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36msub/dir/about.html        [0m[0m |[0m
      | [36msub/dir/nested/nested.html[0m[0m |[0m
    [32mWhen a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                               # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      set :build_dir, "sub/dir"[0m
[32m      ignore 'about.html'[0m
[32m      ignore 'nested/*'[0m
[32m      """[0m
    [32mGiven a built app at "[32m[1mclean-nested-app[0m[0m[32m"[90m                                           # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the following directories should [32m[1mnot [0m[0m[32mexist:[90m                                  # aruba-0.7.4/lib/aruba/cucumber.rb:351[0m[0m
      | [36msub/dir/nested[0m[0m |[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m                                        # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36msub/dir/about.html        [0m[0m |[0m
      | [36msub/dir/nested/nested.html[0m[0m |[0m

  Scenario: Build and clean an app under a hidden directory[90m  # features/clean_build.feature:62[0m
    [32mGiven a fixture app "[32m[1mclean-app[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd app "[32m[1mclean-app[0m[0m[32m" is using config "[32m[1mhidden-dir-before[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/middleman_steps.rb:3[0m[0m
    [32mAnd a built app at "[32m[1mclean-app[0m[0m[32m"[90m                           # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the following files should exist:[90m                   # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36m.build/index.html             [0m[0m |[0m
      | [36m.build/should_be_ignored.html [0m[0m |[0m
      | [36m.build/should_be_ignored2.html[0m[0m |[0m
      | [36m.build/should_be_ignored3.html[0m[0m |[0m
    [32mGiven app "[32m[1mclean-app[0m[0m[32m" is using config "[32m[1mhidden-dir-after[0m[0m[32m"[90m # lib/middleman-core/step_definitions/middleman_steps.rb:3[0m[0m
    [32mAnd a built app at "[32m[1mclean-app[0m[0m[32m"[90m                           # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the following files should exist:[90m                   # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36m.build/index.html[0m[0m |[0m
    [32mAnd the following files should [32m[1mnot [0m[0m[32mexist:[90m                # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36m.build/should_be_ignored.html [0m[0m |[0m
      | [36m.build/should_be_ignored2.html[0m[0m |[0m
      | [36m.build/should_be_ignored3.html[0m[0m |[0m

Feature: Support coffee-script
  In order to offer an alternative when writing Javascript

  Scenario: Rendering coffee script[90m                   # features/coffee-script.feature:4[0m
    [32mGiven the Server is running at "[32m[1mcoffeescript-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/javascripts/coffee_test.js[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m.slice[0m[0m[32m"[90m                        # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering coffee-script with :coffeescript haml-filter[90m # features/coffee-script.feature:9[0m
    [32mGiven the Server is running at "[32m[1mcoffeescript-app[0m[0m[32m"[90m              # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/inline-coffeescript.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m.slice[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering broken coffee[90m                   # features/coffee-script.feature:14[0m
    [32mGiven the Server is running at "[32m[1mcoffeescript-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/javascripts/broken-coffee.js[0m[0m[32m"[90m      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mreserved word[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Building broken coffee[90m                                             # features/coffee-script.feature:19[0m
    [32mGiven a built app at "[32m[1mcoffeescript-app[0m[0m[32m"[90m                                    # lib/middleman-core/step_definitions/builder_steps.rb:7[0m[0m
    [32mThen the output should contain "[32m[1merror  build/javascripts/broken-coffee.js[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:166[0m[0m
    [32mAnd the exit status should be [32m[1m1[0m[0m[32m[90m                                            # aruba-0.7.4/lib/aruba/cucumber.rb:223[0m[0m

Feature: Collections

  Scenario: Lazy query[90m                                      # features/collections.feature:2[0m
    [32mGiven a fixture app "[32m[1mcollections-app[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      articles1 = collection :articles1, resources.select { |r|[0m
[32m        matcher = ::Middleman::Util::UriTemplates.uri_template('blog1/{year}-{month}-{day}-{title}.html')[0m
[32m        ::Middleman::Util::UriTemplates.extract_params(matcher, ::Middleman::Util.normalize_path(r.url))[0m
[32m      }[0m
[32m[0m
[32m      everything = resources.select do |r|[0m
[32m        true[0m
[32m      end[0m
[32m[0m
[32m      def get_tags(resource)[0m
[32m        if resource.data.tags.is_a? String[0m
[32m          resource.data.tags.split(',').map(&:strip)[0m
[32m        else[0m
[32m          resource.data.tags[0m
[32m        end[0m
[32m      end[0m
[32m[0m
[32m      def group_lookup(resource, sum)[0m
[32m        results = Array(get_tags(resource)).map(&:to_s).map(&:to_sym)[0m
[32m[0m
[32m        results.each do |k|[0m
[32m          sum[k] ||= [][0m
[32m          sum[k] << resource[0m
[32m        end[0m
[32m      end[0m
[32m[0m
[32m      tags = everything[0m
[32m          .select { |resource| resource.data.tags }[0m
[32m          .each_with_object({}, &method(:group_lookup))[0m
[32m[0m
[32m      class Wrapper[0m
[32m        attr_reader :stuff[0m
[32m[0m
[32m        def initialize[0m
[32m          @stuff = Set.new[0m
[32m        end[0m
[32m[0m
[32m        def <<((k, v))[0m
[32m          @stuff << k[0m
[32m          self[0m
[32m        end[0m
[32m      end[0m
[32m[0m
[32m      collection :wrapped, tags.reduce(Wrapper.new, :<<)[0m
[32m[0m
[32m      set :tags, tags # Expose to templates[0m
[32m[0m
[32m      collection :first_tag, tags.keys.sort.first[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/index.html.erb[0m[0m[32m" with:[90m          # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      <% collection(:articles1).each do |article| %>[0m
[32m        Article1: <%= article.data.title %>[0m
[32m      <% end %>[0m
[32m[0m
[32m      Tag Count: <%= collection(:wrapped).stuff.length %>[0m
[32m[0m
[32m      <% config[:tags].value.each do |k, items| %>[0m
[32m        Tag: <%= k %> (<%= items.length %>)[0m
[32m        <% items.each do |article| %>[0m
[32m          Article (<%= k %>): <%= article.data.title %>[0m
[32m        <% end %>[0m
[32m      <% end %>[0m
[32m[0m
[32m      First Tag: <%= collection(:first_tag) %>[0m
[32m      """[0m
    [31mGiven the Server is running at "[31m[1mcollections-app[0m[0m[31m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./lib/middleman-core/core_extensions/collections.rb:60:in `sitemap_collector'[0m
[31m      ./tmp/aruba/collections-app/config.rb:1:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/collections.feature:72:in `Given the Server is running at "collections-app"'[0m
    [36mWhen I go to "[36m[1mindex.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mArticle1: Blog1 Newer Article[0m[0m[36m'[90m       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle1: Blog1 Another Article[0m[0m[36m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mTag: foo (4)[0m[0m[36m'[90m                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (foo): Blog1 Newer Article[0m[0m[36m'[90m   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (foo): Blog1 Another Article[0m[0m[36m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (foo): Blog2 Newer Article[0m[0m[36m'[90m   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (foo): Blog2 Another Article[0m[0m[36m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mTag: bar (2)[0m[0m[36m'[90m                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (bar): Blog1 Newer Article[0m[0m[36m'[90m   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (bar): Blog2 Newer Article[0m[0m[36m'[90m   # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mTag: 120 (1)[0m[0m[36m'[90m                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle (120): Blog1 Another Article[0m[0m[36m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mFirst Tag: 120[0m[0m[36m'[90m                       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mTag Count: 3[0m[0m[36m'[90m                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Collected resources update with file changes[90m                                      # features/collections.feature:89[0m
    [32mGiven a fixture app "[32m[1mcollections-app[0m[0m[32m"[90m                                                     # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                                        # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      collection :articles, resources.select { |r|[0m
[32m        matcher = ::Middleman::Util::UriTemplates.uri_template('blog2/{year}-{month}-{day}-{title}.html')[0m
[32m        ::Middleman::Util::UriTemplates.extract_params(matcher, ::Middleman::Util.normalize_path(r.url))[0m
[32m      }[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/index.html.erb[0m[0m[32m" with:[90m                                            # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      <% collection(:articles).each do |article| %>[0m
[32m        Article: <%= article.data.title || article.file_descriptor[:relative_path] %>[0m
[32m      <% end %>[0m
[32m      """[0m
    [31mGiven the Server is running at "[31m[1mcollections-app[0m[0m[31m"[90m                                          # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./lib/middleman-core/core_extensions/collections.rb:60:in `sitemap_collector'[0m
[31m      ./tmp/aruba/collections-app/config.rb:1:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/collections.feature:104:in `Given the Server is running at "collections-app"'[0m
    [36mWhen I go to "[36m[1mindex.html[0m[0m[36m"[90m                                                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should not see "[36m[1mArticle: index.html.erb[0m[0m[36m"[90m                                           # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [36mThen I should see '[36m[1mArticle: Blog2 Newer Article[0m[0m[36m'[90m                                          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle: Blog2 Another Article[0m[0m[36m'[90m                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd the file "[36m[1msource/blog2/2011-01-02-another-article.html.markdown[0m[0m[36m" has the contents[90m     # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[36m      """[0m
[36m      ---[0m
[36m      title: "Blog3 Another Article"[0m
[36m      date: 2011-01-02[0m
[36m      tags:[0m
[36m        - foo[0m
[36m      ---[0m
[36m[0m
[36m      Another Article Content[0m
[36m[0m
[36m      """[0m
    [36mWhen I go to "[36m[1mindex.html[0m[0m[36m"[90m                                                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see "[36m[1mArticle: Blog2 Newer Article[0m[0m[36m"[90m                                          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [36mAnd I should not see "[36m[1mArticle: Blog2 Another Article[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [36mAnd I should see '[36m[1mArticle: Blog3 Another Article[0m[0m[36m'[90m                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd the file "[36m[1msource/blog2/2011-01-01-new-article.html.markdown[0m[0m[36m" is removed[90m               # lib/middleman-core/step_definitions/middleman_steps.rb:37[0m[0m
    [36mWhen I go to "[36m[1mindex.html[0m[0m[36m"[90m                                                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should not see "[36m[1mArticle: Blog2 Newer Article[0m[0m[36m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [36mAnd I should see '[36m[1mArticle: Blog3 Another Article[0m[0m[36m'[90m                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd the file "[36m[1msource/blog2/2014-01-02-yet-another-article.html.markdown[0m[0m[36m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[36m      """[0m
[36m      ---[0m
[36m      title: "Blog2 Yet Another Article"[0m
[36m      date: 2011-01-02[0m
[36m      tags:[0m
[36m        - foo[0m
[36m      ---[0m
[36m[0m
[36m      Yet Another Article Content[0m
[36m      """[0m
    [36mWhen I go to "[36m[1mindex.html[0m[0m[36m"[90m                                                                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mAnd I should see '[36m[1mArticle: Blog3 Another Article[0m[0m[36m'[90m                                         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mAnd I should see '[36m[1mArticle: Blog2 Yet Another Article[0m[0m[36m'[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Work with local helpers[90m                  # features/collections.feature:147[0m
    [32mGiven a fixture app "[32m[1mcollections-app[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m               # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      module TestHelper[0m
[32m        def help_me[0m
[32m          "ok"[0m
[32m        end[0m
[32m      end[0m
[32m[0m
[32m      include TestHelper[0m
[32m[0m
[32m      data.articles.each_with_index do |a, i|[0m
[32m        proxy "/#{i}-#{help_me}.html", a[0m
[32m      end[0m
[32m      """[0m
    [32mAnd a file named "[32m[1mdata/articles.yaml[0m[0m[32m" with:[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      ---[0m
[32m      - "/blog1/2011-01-01-new-article.html"[0m
[32m      - "/blog2/2011-01-02-another-article.html"[0m
[32m      """[0m
    [31mGiven the Server is running at "[31m[1mcollections-app[0m[0m[31m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./lib/middleman-core/core_extensions/collections.rb:65:in `data_collector'[0m
[31m      ./tmp/aruba/collections-app/config.rb:9:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/collections.feature:169:in `Given the Server is running at "collections-app"'[0m
    [36mWhen I go to "[36m[1m0-ok.html[0m[0m[36m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNewer Article Content[0m[0m[36m'[90m        # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m1-ok.html[0m[0m[36m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mAnother Article Content[0m[0m[36m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Collected data update with file changes[90m     # features/collections.feature:175[0m
    [32mGiven a fixture app "[32m[1mcollections-app[0m[0m[32m"[90m               # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      data.articles.each_with_index do |a, i|[0m
[32m        proxy "/#{i}.html", a[0m
[32m      end[0m
[32m      """[0m
    [32mAnd a file named "[32m[1mdata/articles.yaml[0m[0m[32m" with:[90m         # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      ---[0m
[32m      - "/blog1/2011-01-01-new-article.html"[0m
[32m      - "/blog2/2011-01-02-another-article.html"[0m
[32m      """[0m
    [31mGiven the Server is running at "[31m[1mcollections-app[0m[0m[31m"[90m    # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./lib/middleman-core/core_extensions/collections.rb:65:in `data_collector'[0m
[31m      ./tmp/aruba/collections-app/config.rb:1:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/collections.feature:189:in `Given the Server is running at "collections-app"'[0m
    [36mWhen I go to "[36m[1m0.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNewer Article Content[0m[0m[36m'[90m           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m1.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mAnother Article Content[0m[0m[36m'[90m         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m2.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNot Found[0m[0m[36m'[90m                       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen the file "[36m[1mdata/articles.yaml[0m[0m[36m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[36m      """[0m
[36m      ---[0m
[36m      - "/blog1/2011-01-01-new-article.html"[0m
[36m      """[0m
    [36mWhen I go to "[36m[1m0.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNewer Article Content[0m[0m[36m'[90m           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m1.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNot Found[0m[0m[36m'[90m                       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m2.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNot Found[0m[0m[36m'[90m                       # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen the file "[36m[1mdata/articles.yaml[0m[0m[36m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[36m      """[0m
[36m      ---[0m
[36m      - "/blog2/2011-01-02-another-article.html"[0m
[36m      - "/blog1/2011-01-01-new-article.html"[0m
[36m      - "/blog2/2011-01-01-new-article.html"[0m
[36m      """[0m
    [36mWhen I go to "[36m[1m0.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mAnother Article Content[0m[0m[36m'[90m         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m1.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNewer Article Content[0m[0m[36m'[90m           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1m2.html[0m[0m[36m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mAgain[0m[0m[36m'[90m                           # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Arbitrary live datasets[90m                               # features/collections.feature:223[0m
    [32mGiven a fixture app "[32m[1mcollections-app[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                            # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      ignore "/description_template.html"[0m
[32m[0m
[32m      live {[0m
[32m        Dir[File.join(root, "descriptions/*.txt")][0m
[32m      }.each do |description_name|[0m
[32m        base = File.basename(description_name, '.txt')[0m
[32m        proxy "#{base}.html", "/description_template.html", locals: {[0m
[32m          contents: File.read(description_name)[0m
[32m        }[0m
[32m      end[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/description_template.html.erb[0m[0m[32m" with:[90m # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      <%= contents %>[0m
[32m      """[0m
    [32mAnd a file named "[32m[1mdescriptions/test1.txt[0m[0m[32m" with:[90m               # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      Test1[0m
[32m      """[0m
    [31mGiven the Server is running at "[31m[1mcollections-app[0m[0m[31m"[90m              # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./tmp/aruba/collections-app/config.rb:3:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/collections.feature:246:in `Given the Server is running at "collections-app"'[0m
    [36mWhen I go to "[36m[1mtest1.html[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mTest1[0m[0m[36m'[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1mtest2.html[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNot Found[0m[0m[36m'[90m                                 # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen the file "[36m[1mdescriptions/test2.txt[0m[0m[36m" has the contents[90m       # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[36m      """[0m
[36m      Test2[0m
[36m      """[0m
    [36mWhen I go to "[36m[1mtest1.html[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mTest1[0m[0m[36m'[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1mtest2.html[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mTest2[0m[0m[36m'[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen the file "[36m[1mdescriptions/test1.txt[0m[0m[36m" is removed[90m             # lib/middleman-core/step_definitions/middleman_steps.rb:37[0m[0m
    [36mWhen I go to "[36m[1mtest1.html[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mNot Found[0m[0m[36m'[90m                                 # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [36mWhen I go to "[36m[1mtest2.html[0m[0m[36m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see '[36m[1mTest2[0m[0m[36m'[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

Feature: Console

  Scenario: Enter and exit the console[90m           # features/console.feature:3[0m
    [32mGiven a fixture app "[32m[1mlarge-build-app[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mWhen I run `[32m[1mmiddleman console[0m[0m[32m` interactively[90m # aruba-0.7.4/lib/aruba/cucumber.rb:139[0m[0m
    [32mAnd I type "[32m[1mputs 'Hello from the console.'[0m[0m[32m"[90m  # aruba-0.7.4/lib/aruba/cucumber.rb:143[0m[0m
    [32mAnd I type "[32m[1mexit[0m[0m[32m"[90m                            # aruba-0.7.4/lib/aruba/cucumber.rb:143[0m[0m
    [32mThen it should [32m[1mpass[0m[0m[32m with:[90m                    # aruba-0.7.4/lib/aruba/cucumber.rb:231[0m[0m
[32m      """[0m
[32m      Hello from the console.[0m
[32m      """[0m

Feature: Support content_for and yield_content helpers

  Scenario: content_for works as expected in erb[90m                                      # features/content_for.feature:3[0m
    [32mGiven the Server is running at "[32m[1mcontent-for-app[0m[0m[32m"[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/content_for_erb.html[0m[0m[32m"[90m                                              # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIn Layout: I am the yielded content erb <s>with html tags</s>[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: content_for works as expected in haml[90m                                      # features/content_for.feature:8[0m
    [32mGiven the Server is running at "[32m[1mcontent-for-app[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/content_for_haml.html[0m[0m[32m"[90m                                              # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIn Layout: I am the yielded content haml <s>with html tags</s>[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: content_for works as expected in slim[90m                                      # features/content_for.feature:13[0m
    [32mGiven the Server is running at "[32m[1mcontent-for-app[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/content_for_slim.html[0m[0m[32m"[90m                                              # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIn Layout: I am the yielded content slim <s>with html tags</s>[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

Feature: Setting the right content type for files

  Scenario: The right content type gets automatically determined[90m # features/content_type.feature:3[0m
    [32mGiven the Server is running at "[32m[1mcontent-type-app[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/html[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/images/blank.gif[0m[0m[32m"[90m                             # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mimage/gif[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/javascripts/app.js[0m[0m[32m"[90m                           # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mapplication/javascript[0m[0m[32m"[90m     # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/stylesheets/site.css[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/css[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/README[0m[0m[32m"[90m                                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/plain[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/index.php[0m[0m[32m"[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/php[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m

  Scenario: Content type can be set explicitly via page or proxy or frontmatter[90m # features/content_type.feature:18[0m
    [32mGiven a fixture app "[32m[1mcontent-type-app[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                                          # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page "README", content_type: 'text/awesome'[0m
[32m      proxy "bar", "index.html", content_type: 'text/custom'[0m
[32m      proxy "foo", "README" # auto-delegate to target content type[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcontent-type-app[0m[0m[32m"[90m                             # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/README[0m[0m[32m"[90m                                                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/awesome[0m[0m[32m"[90m                              # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/bar[0m[0m[32m"[90m                                                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/custom[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/foo[0m[0m[32m"[90m                                                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/awesome[0m[0m[32m"[90m                              # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m
    [32mWhen I go to "[32m[1m/override.html[0m[0m[32m"[90m                                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mtext/neato[0m[0m[32m"[90m                                # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m

  [36m@preserve_mime_types[0m
  Scenario: Content types can be overridden with mime_type[90m     # features/content_type.feature:37[0m
    [32mGiven a fixture app "[32m[1mcontent-type-app[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                         # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      mime_type('.js', 'application/x-javascript')[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcontent-type-app[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/javascripts/app.js[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the content type should be "[32m[1mapplication/x-javascript[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:83[0m[0m

Feature: Support customizing the source directory name

  Scenario: Layouts don't try to build[90m                 # features/custom-source.feature:3[0m
    [32mGiven a successfully built app at "[32m[1mcustom-src-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                               # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m         # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mlayouts/layout.html[0m[0m |[0m

Feature: Custom Layout Engine

  Scenario: Checking built folder for content[90m                    # features/custom_layout_engines.feature:3[0m
    [32mGiven a successfully built app at "[32m[1mcustom-layout-app[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                         # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                       # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mindex.html[0m[0m |[0m
    [32mAnd the file "[32m[1mindex.html[0m[0m[32m" should contain "[32m[1mComment in layout[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

Feature: Custom layouts
  In order easily switch between relative and absolute paths

  Scenario: Using custom :layout attribute[90m            # features/custom_layouts.feature:4[0m
    [32mGiven a fixture app "[32m[1mcustom-layout-app2[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page '/custom-layout.html', layout: :custom[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcustom-layout-app2[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout.html[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using custom :layout attribute with proxy[90m # features/custom_layouts.feature:14[0m
    [32mGiven a fixture app "[32m[1mcustom-layout-app2[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page '/test/*', layout: :custom[0m
[32m      proxy "/test/me.html", "/custom-layout.html"[0m
[32m      live { %w(you) }.each do |who|[0m
[32m        proxy "/test/#{who}.html", "/custom-layout.html"[0m
[32m      end[0m
[32m      """[0m
    [31mAnd the Server is running at "[31m[1mcustom-layout-app2[0m[0m[31m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./tmp/aruba/custom-layout-app2/config.rb:3:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/custom_layouts.feature:24:in `And the Server is running at "custom-layout-app2"'[0m
    [36mWhen I go to "[36m[1m/test/me.html[0m[0m[36m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see "[36m[1mCustom Layout[0m[0m[36m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [36mWhen I go to "[36m[1m/test/you.html[0m[0m[36m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see "[36m[1mCustom Layout[0m[0m[36m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using custom :layout attribute with folders[90m # features/custom_layouts.feature:30[0m
    [32mGiven a fixture app "[32m[1mcustom-layout-app2[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page '/custom-layout-dir/', layout: :custom[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcustom-layout-app2[0m[0m[32m"[90m   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir/[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir/index.html[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using custom :layout attribute with folders[90m # features/custom_layouts.feature:44[0m
    [32mGiven a fixture app "[32m[1mcustom-layout-app2[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page '/custom-layout-dir', layout: :custom[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcustom-layout-app2[0m[0m[32m"[90m   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir/[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir/index.html[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using custom :layout attribute with folders[90m # features/custom_layouts.feature:58[0m
    [32mGiven a fixture app "[32m[1mcustom-layout-app2[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page '/custom-layout-dir/index.html', layout: :custom[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mcustom-layout-app2[0m[0m[32m"[90m   # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir/[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/custom-layout-dir/index.html[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mCustom Layout[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Setting layout inside a matching page block[90m           # features/custom_layouts.feature:72[0m
    [32mGiven the Server is running at "[32m[1mpage-helper-layout-block-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mHello[0m[0m[32m"[90m                                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mWorld[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/path/child.html[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mAlt[0m[0m[32m"[90m                                       # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mChild[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mHello[0m[0m[32m"[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m
    [32mWhen I go to "[32m[1m/path/index.html[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mAlt[0m[0m[32m"[90m                                       # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mMonde[0m[0m[32m"[90m                                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mHello[0m[0m[32m"[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

Feature: Local Data API
  In order to abstract content from structure

  Scenario: Rendering html[90m                          # features/data.feature:4[0m
    [32mGiven the Server is running at "[32m[1mbasic-data-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
W, [2023-10-20T16:33:17.380930 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/data.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mOne:Two[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen the file "[32m[1mdata/test.yml[0m[0m[32m" has the contents[90m  # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m      -[0m
[32m        title: "Three"[0m
[32m      -[0m
[32m        title: "Four"[0m
[32m      """[0m
W, [2023-10-20T16:33:17.389375 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/data.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mThree:Four[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen the file "[32m[1mdata/test.yml[0m[0m[32m" is removed[90m        # lib/middleman-core/step_definitions/middleman_steps.rb:37[0m[0m
    [32mWhen I go to "[32m[1m/data.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mNo Test Data[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Numeric keys in YAML[90m                          # features/data.feature:21[0m
    [32mGiven the Server is running at "[32m[1mbasic-data-app[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen the file "[32m[1mdata/by_year.yml[0m[0m[32m" has the contents[90m     # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m      -[0m
[32m        2018: 1[0m
[32m        2019: 2[0m
[32m      """[0m
    [32mAnd the file "[32m[1msource/years.html.erb[0m[0m[32m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m        <%= data.by_year.first[2018] %>:<%= data.by_year.first[2019] %>[0m
[32m      """[0m
W, [2023-10-20T16:33:17.441112 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/years.html[0m[0m[32m"[90m                            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m1:2[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Date keys in YAML[90m                             # features/data.feature:36[0m
    [32mGiven the Server is running at "[32m[1mbasic-data-app[0m[0m[32m"[90m       # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen the file "[32m[1mdata/dates.yml[0m[0m[32m" has the contents[90m       # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m      2016-03-25:[0m
[32m        title: "1"[0m
[32m      2018-03-25:[0m
[32m        title: "2"[0m
[32m      """[0m
    [32mAnd the file "[32m[1msource/years.html.erb[0m[0m[32m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m        <%= data.dates.values.map(&:title).join(":") %>[0m
[32m      """[0m
W, [2023-10-20T16:33:17.486464 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/years.html[0m[0m[32m"[90m                            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m1:2[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering json[90m                           # features/data.feature:52[0m
    [32mGiven the Server is running at "[32m[1mbasic-data-app[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
W, [2023-10-20T16:33:17.519550 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/data3.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mOne:Two[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen the file "[32m[1mdata/test2.json[0m[0m[32m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m      [[0m
[32m        { "title": "Three" },[0m
[32m        { "title": "Four" }[0m
[32m      ][0m
[32m      """[0m
W, [2023-10-20T16:33:17.527729 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/data3.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mThree:Four[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen the file "[32m[1mdata/test2.json[0m[0m[32m" is removed[90m       # lib/middleman-core/step_definitions/middleman_steps.rb:37[0m[0m
    [32mWhen I go to "[32m[1m/data3.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mNo Test Data[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using data in config.rb[90m           # features/data.feature:69[0m
    [31mGiven the Server is running at "[31m[1mdata-app[0m[0m[31m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./lib/middleman-core/core_extensions/collections.rb:65:in `data_collector'[0m
[31m      ./tmp/aruba/data-app/config.rb:1:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/data.feature:70:in `Given the Server is running at "data-app"'[0m
    [36mWhen I go to "[36m[1m/test1.html[0m[0m[36m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see "[36m[1mWelcome[0m[0m[36m"[90m               # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using data2 in config.rb[90m          # features/data.feature:74[0m
    [31mGiven the Server is running at "[31m[1mdata-app[0m[0m[31m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
[31m      can't convert Middleman::CoreExtensions::Collections::LazyCollectorStep to String (Middleman::CoreExtensions::Collections::LazyCollectorStep#to_str gives Middleman::CoreExtensions::Collections::LazyCollectorStep) (TypeError)[0m
[31m      ./lib/middleman-core/core_extensions/collections.rb:65:in `data_collector'[0m
[31m      ./tmp/aruba/data-app/config.rb:1:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:329:in `instance_eval'[0m
[31m      ./lib/middleman-core/application.rb:329:in `evaluate_configuration!'[0m
[31m      ./lib/middleman-core/application.rb:286:in `initialize'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `new'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:48:in `/^the Server is running$/'[0m
[31m      ./lib/middleman-core/step_definitions/server_steps.rb:68:in `/^the Server is running at "([^\"]*)"$/'[0m
[31m      features/data.feature:75:in `Given the Server is running at "data-app"'[0m
    [36mWhen I go to "[36m[1m/test2.html[0m[0m[36m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [36mThen I should see "[36m[1mWelcome[0m[0m[36m"[90m               # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using nested data[90m                        # features/data.feature:79[0m
    [32mGiven the Server is running at "[32m[1mnested-data-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/test.html[0m[0m[32m"[90m                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mtitle1:Hello[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mtitle2:More[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mtitle3:Stuff[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Using data postscript[90m                       # features/data.feature:86[0m
    [32mGiven the Server is running at "[32m[1mnested-data-app[0m[0m[32m"[90m    # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/extracontent.html[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m<h1>With Content</h1>[0m[0m[32m"[90m           # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see '[32m[1m<h2 id="header-2">Header 2</h2>[0m[0m[32m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see "[32m[1m<p>Paragraph 1</p>[0m[0m[32m"[90m              # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Rendering toml[90m                           # features/data.feature:93[0m
    [32mGiven the Server is running at "[32m[1mbasic-data-app[0m[0m[32m"[90m  # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
W, [2023-10-20T16:33:17.660512 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/data4.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mOne:Two[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen the file "[32m[1mdata/test3.toml[0m[0m[32m" has the contents[90m # lib/middleman-core/step_definitions/middleman_steps.rb:31[0m[0m
[32m      """[0m
[32m      [titles][0m
[32m[0m
[32m      [titles.first][0m
[32m        title = "Three"[0m
[32m[0m
[32m      [titles.second][0m
[32m        title = "Four"[0m
[32m      """[0m
W, [2023-10-20T16:33:17.669637 #58870]  WARN -- : You are setting a key that conflicts with a built-in method Middleman::Util::EnhancedHash#first defined in Enumerable. This can cause unexpected behavior when accessing the key as a property. You can still access the key via the #[] method.
    [32mWhen I go to "[32m[1m/data4.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mThree:Four[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen the file "[32m[1mdata/test3.toml[0m[0m[32m" is removed[90m       # lib/middleman-core/step_definitions/middleman_steps.rb:37[0m[0m
    [32mWhen I go to "[32m[1m/data4.html[0m[0m[32m"[90m                       # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mNo Test Data[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

Feature: Describe which files get layouts

  Background: [90m                                          # features/default-layout.feature:3[0m
    [32mGiven an empty app[90m                                  # lib/middleman-core/step_definitions/middleman_steps.rb:10[0m[0m
    [32mAnd a file named "[32m[1mconfig.rb[0m[0m[32m" with:[90m                  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      page "/about.html", layout: :layout2[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/layouts/layout.erb[0m[0m[32m" with:[90m  # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      In Layout[0m
[32m      <%= yield %>[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/layouts/layout2.erb[0m[0m[32m" with:[90m # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      <root>[0m
[32m        <title>Second Layout</title>[0m
[32m        <%= yield %>[0m
[32m      </root>[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/index.html.erb[0m[0m[32m" with:[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      In Index[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/about.html.erb[0m[0m[32m" with:[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      In About[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/style.css.scss[0m[0m[32m" with:[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      html { border: 1; }[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/style2.scss[0m[0m[32m" with:[90m         # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      html { border: 2; }[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/data.json[0m[0m[32m" with:[90m           # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      { "hello": "world" }[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/script.js[0m[0m[32m" with:[90m           # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      helloWorld();[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/test.xml.erb[0m[0m[32m" with:[90m        # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      ---[0m
[32m      layout: layout2[0m
[32m      ---[0m
[32m[0m
[32m      <test>Hi</test>[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mempty_app[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m

  Scenario: Normal Template[90m      # features/default-layout.feature:55[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIn Index[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mIn Layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Normal Template with override[90m # features/default-layout.feature:60[0m
    [32mWhen I go to "[32m[1m/about.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIn About[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1mSecond Layout[0m[0m[32m"[90m      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mIn Layout[0m[0m[32m"[90m      # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: Sass[90m                     # features/default-layout.feature:66[0m
    [32mWhen I go to "[32m[1m/style.css[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mborder: 1[0m[0m[32m"[90m    # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mIn Layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: Sass with extension[90m      # features/default-layout.feature:71[0m
    [32mWhen I go to "[32m[1m/style2[0m[0m[32m"[90m           # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mborder: 2[0m[0m[32m"[90m    # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mIn Layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: JSON[90m                     # features/default-layout.feature:76[0m
    [32mWhen I go to "[32m[1m/data.json[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mhello[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mIn Layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: JS[90m                       # features/default-layout.feature:81[0m
    [32mWhen I go to "[32m[1m/script.js[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mhelloWorld()[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should not see "[32m[1mIn Layout[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:103[0m[0m

  Scenario: XML[90m                                     # features/default-layout.feature:86[0m
    [32mWhen I go to "[32m[1m/test.xml[0m[0m[32m"[90m                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1m<test>Hi</test>[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mAnd I should see "[32m[1m<title>Second Layout</title>[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

Feature: Add an empty alt tag for images that don't have alt tags specified

  Scenario: Image does not have alt tag specified[90m         # features/default_alt_tag.feature:3[0m
    [32mGiven the Server is running at "[32m[1mdefault-alt-tags-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/empty-alt-tag.html[0m[0m[32m"[90m                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1malt=""[0m[0m[32m'[90m                            # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

  Scenario: Image has alt tag specified[90m                   # features/default_alt_tag.feature:8[0m
    [32mGiven the Server is running at "[32m[1mdefault-alt-tags-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/meaningful-alt-tag.html[0m[0m[32m"[90m               # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1malt="Meaningful alt text"[0m[0m[32m'[90m         # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

Feature: Directory Index
  In order output Apache-friendly directories and indexes

  Scenario: Checking built folder for content[90m                                      # features/directory_index.feature:4[0m
    [32mGiven a successfully built app at "[32m[1mindexable-app[0m[0m[32m"[90m                              # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                           # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                                         # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mneeds_index/index.html         [0m[0m |[0m
      | [36ma_folder/needs_index/index.html[0m[0m |[0m
      | [36mleave_me_alone.html            [0m[0m |[0m
      | [36mwildcard_leave_me_alone.html   [0m[0m |[0m
      | [36mregex_leave_me_alone2.html     [0m[0m |[0m
      | [36mevil spaces/index.html         [0m[0m |[0m
      | [36mregular/index.html             [0m[0m |[0m
      | [36m.htaccess                      [0m[0m |[0m
      | [36m.htpasswd                      [0m[0m |[0m
      | [36m.nojekyll                      [0m[0m |[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m                                     # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36megular/index/index.html           [0m[0m |[0m
      | [36mneeds_index.html                  [0m[0m |[0m
      | [36mevil spaces.html                  [0m[0m |[0m
      | [36ma_folder/needs_index.html         [0m[0m |[0m
      | [36mleave_me_alone/index.html         [0m[0m |[0m
      | [36mwildcard_leave_me_alone/index.html[0m[0m |[0m
      | [36mregex_leave_me_alone2/index.html  [0m[0m |[0m
    [32mAnd the file "[32m[1mneeds_index/index.html[0m[0m[32m" should contain "[32m[1mIndexable[0m[0m[32m"[90m               # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1ma_folder/needs_index/index.html[0m[0m[32m" should contain "[32m[1mIndexable[0m[0m[32m"[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mleave_me_alone.html[0m[0m[32m" should contain "[32m[1mStay away[0m[0m[32m"[90m                  # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mregular/index.html[0m[0m[32m" should contain "[32m[1mRegular[0m[0m[32m"[90m                     # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mAnd the file "[32m[1mevil spaces/index.html[0m[0m[32m" should contain "[32m[1mFilled with Evil Spaces[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Preview normal file[90m                    # features/directory_index.feature:32[0m
    [32mGiven the Server is running at "[32m[1mindexable-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/needs_index/[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIndexable[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Preview normal file with spaces in filename[90m # features/directory_index.feature:37[0m
    [32mGiven the Server is running at "[32m[1mindexable-app[0m[0m[32m"[90m      # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/evil spaces/[0m[0m[32m"[90m                        # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFilled with Evil Spaces[0m[0m[32m"[90m         # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Preview normal file subdirectory[90m       # features/directory_index.feature:42[0m
    [32mGiven the Server is running at "[32m[1mindexable-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/a_folder/needs_index/[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIndexable[0m[0m[32m"[90m                  # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Preview ignored file[90m                   # features/directory_index.feature:47[0m
    [32mGiven the Server is running at "[32m[1mindexable-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/leave_me_alone/[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Link_to knows about directory indexes[90m                                 # features/directory_index.feature:52[0m
    [32mGiven a fixture app "[32m[1mindexable-app[0m[0m[32m"[90m                                           # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mAnd a file named "[32m[1msource/link_to.html.erb[0m[0m[32m" with:[90m                              # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      link_to: <%= link_to "Needs Index", "/needs_index.html" %>[0m
[32m      explicit_link_to: <%= link_to "Explicit", "/needs_index/index.html" %>[0m
[32m      unknown_link_to: <%= link_to "Unknown", "/unknown.html" %>[0m
[32m      relative_link_to: <%= link_to "Relative", "needs_index.html" %>[0m
[32m      link_to_with_spaces: <%= link_to "Spaces", "/evil%20spaces.html" %>[0m
[32m      """[0m
    [32mAnd a file named "[32m[1msource/link_to/sub.html.erb[0m[0m[32m" with:[90m                          # aruba-0.7.4/lib/aruba/cucumber.rb:34[0m[0m
[32m      """[0m
[32m      link_to: <%= link_to "Needs Index", "/needs_index.html" %>[0m
[32m      explicit_link_to: <%= link_to "Explicit", "/needs_index/index.html" %>[0m
[32m      unknown_link_to: <%= link_to "Unknown", "/unknown.html" %>[0m
[32m      relative_link_to: <%= link_to "Relative", "../needs_index.html" %>[0m
[32m      link_to_with_spaces: <%= link_to "Spaces", "../evil%20spaces.html" %>[0m
[32m      """[0m
    [32mAnd the Server is running at "[32m[1mindexable-app[0m[0m[32m"[90m                                  # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/link_to/[0m[0m[32m"[90m                                                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mlink_to: <a href="/needs_index/">Needs Index</a>[0m[0m[32m'[90m          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mexplicit_link_to: <a href="/needs_index/">Explicit</a>[0m[0m[32m'[90m    # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1munknown_link_to: <a href="/unknown.html">Unknown</a>[0m[0m[32m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mrelative_link_to: <a href="/needs_index/">Relative</a>[0m[0m[32m'[90m    # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mlink_to_with_spaces: <a href="/evil%20spaces/">Spaces</a>[0m[0m[32m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mWhen I go to "[32m[1m/link_to/sub/[0m[0m[32m"[90m                                                  # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see '[32m[1mlink_to: <a href="/needs_index/">Needs Index</a>[0m[0m[32m'[90m          # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mexplicit_link_to: <a href="/needs_index/">Explicit</a>[0m[0m[32m'[90m    # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1munknown_link_to: <a href="/unknown.html">Unknown</a>[0m[0m[32m'[90m      # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mrelative_link_to: <a href="/needs_index/">Relative</a>[0m[0m[32m'[90m    # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m
    [32mThen I should see '[32m[1mlink_to_with_spaces: <a href="/evil%20spaces/">Spaces</a>[0m[0m[32m'[90m # lib/middleman-core/step_definitions/server_steps.rb:95[0m[0m

Feature: Dynamic Pages
  In order to use a single view to generate multiple output files

  Scenario: Checking built folder for content[90m             # features/dynamic_pages.feature:4[0m
    [32mGiven a successfully built app at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                  # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the following files should exist:[90m                # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mfake.html          [0m[0m |[0m
      | [36mfake2.html         [0m[0m |[0m
      | [36mfake3.html         [0m[0m |[0m
      | [36mfake4.html         [0m[0m |[0m
      | [36mfake/one.html      [0m[0m |[0m
      | [36mfake/two.html      [0m[0m |[0m
      | [36mfake2/one.html     [0m[0m |[0m
      | [36mfake2/two.html     [0m[0m |[0m
      | [36mfake3/one.html     [0m[0m |[0m
      | [36mfake3/two.html     [0m[0m |[0m
      | [36mfake4/one.html     [0m[0m |[0m
      | [36mfake4/two.html     [0m[0m |[0m
      | [36mtarget_ignore.html [0m[0m |[0m
      | [36mtarget_ignore2.html[0m[0m |[0m
      | [36mtarget_ignore3.html[0m[0m |[0m
      | [36mtarget_ignore4.html[0m[0m |[0m
      | [36m明日がある.html         [0m[0m |[0m
    [32mThen the following files should [32m[1mnot [0m[0m[32mexist:[90m            # aruba-0.7.4/lib/aruba/cucumber.rb:321[0m[0m
      | [36mshould_be_ignored.html [0m[0m |[0m
      | [36mshould_be_ignored2.html[0m[0m |[0m
      | [36mshould_be_ignored3.html[0m[0m |[0m
      | [36mshould_be_ignored4.html[0m[0m |[0m
      | [36mshould_be_ignored5.html[0m[0m |[0m
      | [36mshould_be_ignored6.html[0m[0m |[0m
      | [36mshould_be_ignored7.html[0m[0m |[0m
      | [36mshould_be_ignored8.html[0m[0m |[0m
      | [36mshould_be_ignored9.html[0m[0m |[0m

  Scenario: Preview basic proxy[90m                        # features/dynamic_pages.feature:36[0m
    [32mGiven the Server is running at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/fake.html[0m[0m[32m"[90m                          # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake2.html[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake3.html[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake4.html[0m[0m[32m"[90m                         # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Preview proxy with variable one[90m            # features/dynamic_pages.feature:47[0m
    [32mGiven the Server is running at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/fake/one.html[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: one[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am one glob[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake2/one.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: one[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am two glob[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake3/one.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: one[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am three glob[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake4/one.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: one[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am four glob[0m[0m[32m"[90m         # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Preview proxy with variable two[90m            # features/dynamic_pages.feature:69[0m
    [32mGiven the Server is running at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/fake/two.html[0m[0m[32m"[90m                      # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: two[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am one glob[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake2/two.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: two[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am two glob[0m[0m[32m"[90m          # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake3/two.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: two[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am three glob[0m[0m[32m"[90m        # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/fake4/two.html[0m[0m[32m"[90m                     # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mI am real: two[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mGlobal: I am four glob[0m[0m[32m"[90m         # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mThen I should see "[32m[1mAll: I am all glob[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Build proxy with variable one[90m                                   # features/dynamic_pages.feature:91[0m
    [32mGiven a successfully built app at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/builder_steps.rb:18[0m[0m
    [32mWhen I cd to "[32m[1mbuild[0m[0m[32m"[90m                                                    # aruba-0.7.4/lib/aruba/cucumber.rb:92[0m[0m
    [32mThen the file "[32m[1mfake/one.html[0m[0m[32m" should contain "[32m[1mI am real: one[0m[0m[32m"[90m           # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake/one.html[0m[0m[32m" should contain "[32m[1mGlobal: I am one glob[0m[0m[32m"[90m    # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake/one.html[0m[0m[32m" should contain "[32m[1mAll: I am all glob[0m[0m[32m"[90m       # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake2/one.html[0m[0m[32m" should contain "[32m[1mI am real: one[0m[0m[32m"[90m          # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake2/one.html[0m[0m[32m" should contain "[32m[1mGlobal: I am two glob[0m[0m[32m"[90m   # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake2/one.html[0m[0m[32m" should contain "[32m[1mAll: I am all glob[0m[0m[32m"[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake3/one.html[0m[0m[32m" should contain "[32m[1mI am real: one[0m[0m[32m"[90m          # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake3/one.html[0m[0m[32m" should contain "[32m[1mGlobal: I am three glob[0m[0m[32m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [32mThen the file "[32m[1mfake3/one.html[0m[0m[32m" should contain "[32m[1mAll: I am all glob[0m[0m[32m"[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

  Scenario: Target ignore[90m                              # features/dynamic_pages.feature:106[0m
    [32mGiven the Server is running at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/target_ignore.html[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIgnore me! 3[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/target_ignore2.html[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIgnore me! 6[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/target_ignore3.html[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIgnore me! 7[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/target_ignore4.html[0m[0m[32m"[90m                # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mIgnore me! 8[0m[0m[32m"[90m                   # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

  Scenario: Preview ignored paths[90m                      # features/dynamic_pages.feature:117[0m
    [32mGiven the Server is running at "[32m[1mdynamic-pages-app[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored.html[0m[0m[32m"[90m             # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored2.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored3.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored4.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored5.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored6.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored7.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored8.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m
    [32mWhen I go to "[32m[1m/should_be_ignored9.html[0m[0m[32m"[90m            # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen I should see "[32m[1mFile Not Found[0m[0m[32m"[90m                 # lib/middleman-core/step_definitions/server_steps.rb:91[0m[0m

# encoding: iso-8859-1
Feature: encoding option

  Scenario: No encoding set[90m                                       # features/encoding_option.feature:4[0m
    [32mGiven a fixture app "[32m[1mclean-app[0m[0m[32m"[90m                               # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mGiven the Server is running at "[32m[1mclean-app[0m[0m[32m"[90m                    # lib/middleman-core/step_definitions/server_steps.rb:66[0m[0m
    [32mWhen I go to "[32m[1m/index.html[0m[0m[32m"[90m                                    # lib/middleman-core/step_definitions/server_steps.rb:75[0m[0m
    [32mThen the "[32m[1mContent-Type[0m[0m[32m" header should contain "[32m[1mtext/html[0m[0m[32m"[90m     # lib/middleman-core/step_definitions/server_steps.rb:87[0m[0m
    [32mThen the "[32m[1mContent-Type[0m[0m[32m" header should contain "[32m[1mcharset=utf-8[0m[0m[32m"[90m # lib/middleman-core/step_definitions/server_steps.rb:87[0m[0m

Feature: Extension author could use some hooks

  Scenario: When build[90m                                             # features/extension_api_deprecations.feature:3[0m
    [32mGiven a fixture app "[32m[1mextension-api-deprecations-app[0m[0m[32m"[90m           # lib/middleman-core/step_definitions/middleman_steps.rb:16[0m[0m
    [32mWhen I run `[32m[1mmiddleman build[0m[0m[32m`[90m                                   # aruba-0.7.4/lib/aruba/cucumber.rb:119[0m[0m
    [31mThen the exit status should be [31m[1m0[0m[0m[31m[90m                               # aruba-0.7.4/lib/aruba/cucumber.rb:223[0m[0m
[31m      expected that command "middleman build" has exit status of "0", but has "2". (RSpec::Expectations::ExpectationNotMetError)[0m
[31m      features/extension_api_deprecations.feature:6:in `Then the exit status should be 0'[0m
    [36mAnd the output should contain "[36m[1m`set :layout` is deprecated[0m[0m[36m"[90m    # aruba-0.7.4/lib/aruba/cucumber.rb:166[0m[0m
    [36mAnd the file "[36m[1mbuild/index.html[0m[0m[36m" should contain "[36m[1mIn Index[0m[0m[36m"[90m      # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m
    [36mAnd the file "[36m[1mbuild/index.html[0m[0m[36m" should [36m[1mnot [0m[0m[36mcontain "[36m[1mIn Layout[0m[0m[36m"[90m # aruba-0.7.4/lib/aruba/cucumber.rb:359[0m[0m

[31mFailing Scenarios:[0m
[31mcucumber features/builder.feature:55[0m[90m # Scenario: Builded text file(ex: html, css, xml, txt)'s permission is 0644[0m
[31mcucumber features/collections.feature:2[0m[90m # Scenario: Lazy query[0m
[31mcucumber features/collections.feature:89[0m[90m # Scenario: Collected resources update with file changes[0m
[31mcucumber features/collections.feature:147[0m[90m # Scenario: Work with local helpers[0m
[31mcucumber features/collections.feature:175[0m[90m # Scenario: Collected data update with file changes[0m
[31mcucumber features/collections.feature:223[0m[90m # Scenario: Arbitrary live datasets[0m
[31mcucumber features/custom_layouts.feature:14[0m[90m # Scenario: Using custom :layout attribute with proxy[0m
[31mcucumber features/data.feature:69[0m[90m # Scenario: Using data in config.rb[0m
[31mcucumber features/data.feature:74[0m[90m # Scenario: Using data2 in config.rb[0m
[31mcucumber features/extension_api_deprecations.feature:3[0m[90m # Scenario: When build[0m

107 scenarios ([31m10 failed[0m, [32m97 passed[0m)
889 steps ([31m10 failed[0m, [36m84 skipped[0m, [32m795 passed[0m)
0m58.627s
Coverage report generated for Cucumber Features, RSpec to /Users/andrey.marchenko/p/middleman/middleman-core/coverage. 3148 / 4036 LOC (78.0%) covered.
